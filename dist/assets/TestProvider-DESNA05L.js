import{j as e,r as s,d as T,B as C}from"./index-Ci_d4JdD.js";function D(){return e.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500/75 transition-opacity"}),e.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:e.jsx("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-xs",children:e.jsx("div",{className:"bg-white py-7",children:e.jsxs("div",{className:"mt-3 text-center flex items-center justify-center gap-5 sm:mt-0 sm:text-left",children:[e.jsx("h3",{className:"text-base font-medium ",id:"dialog-title",children:"Loading"}),e.jsx("div",{className:"animate-spin rounded-full h-7 w-7 border-t-transparent border-2 border-gray-900"})]})})})})]})}const h=s.createContext(),P=async(i,n)=>await T.post(`${C}/api/exam/solution`,{userId:i,testId:n},{withCredentials:!0}).then(r=>r.data.data).catch(r=>{var t,a;return((a=(t=r.response)==null?void 0:t.data)==null?void 0:a.message)||"Error fetching solution"}),_=({children:i,testId:n,userId:r})=>{const[t,a]=s.useState(null),[c,A]=s.useState(null),[l,g]=s.useState(!0),[p,d]=s.useState(),[j,v]=s.useState(!1),[u,m]=s.useState(-1),[S,x]=s.useState(!1);if(s.useEffect(()=>{(async()=>{const o=await P(r,n);a(o),g(!1),d(o.hasAgreed),m(o.currSection),x(o.isSubmitted)})()},[]),l)return e.jsxs("div",{className:"flex items-center justify-center bg-white h-screen w-screen",children:[" ",e.jsx(D,{})]});if(c)return console.error("Test query error:",c),e.jsx("p",{children:"Error loading test data. Please try again."});const f=t.testSnapshot,w=f[u],y=t.response,b=t.userDetails||[],N=t.columns||[],E=t.isProtected||!1,L={};return e.jsx(h.Provider,{value:{loader:j,hasAgreed:p,setLoader:v,setHasAgreed:d,setData:a,isSubmitted:S,setIsSubmitted:x,testId:n,setCurrent:m,data:t,error:c,loading:l,test:f,section:w,response:y,current:u,isProtected:E,helpers:L,userDetails:b,columns:N,submissionId:t._id},children:i})},q=()=>s.useContext(h);export{D as L,_ as T,q as u};
