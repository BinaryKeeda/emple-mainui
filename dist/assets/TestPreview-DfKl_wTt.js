import{e as v,j as e,r as y,i as S,I as w,an as A,d as C,B as I}from"./index-W_7DnO0K.js";const E=v(e.jsx("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos"),F=()=>{const[d,r]=y.useState(null),[o,t]=y.useState(null),[h,l]=y.useState(!0),[a,c]=y.useState(0),{id:x}=S();if(y.useEffect(()=>{(async()=>{var p;try{const N=await C.get(`${I}/api/test/response/${x}`,{withCredentials:!0});if((p=N.data)!=null&&p.status){const b=N.data.data;r(b),t(computeAnalysis(b.response,b.testSnapshot))}}catch(N){console.error("Error fetching preview:",N.message)}finally{l(!1)}})()},[x]),h)return e.jsx("p",{className:"text-center py-6",children:"Loading..."});if(!d)return e.jsx("p",{className:"text-center text-red-500 py-6",children:"No data found"});const{response:s,testSnapshot:n}=d;if(!s||s.length===0)return e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Test Preview"}),e.jsx("p",{className:"mt-4 text-red-500",children:"No responses available for this test."})]});const m=()=>{a<n.length-1&&c(a+1)},j=()=>{a>0&&c(a-1)},i=n[a],u=s.find(f=>f.sectionId===(i==null?void 0:i.sectionId));return e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 text-gray-800",children:"Test Preview"}),e.jsxs("div",{className:"flex items-center justify-between mb-6 bg-white shadow p-4 rounded-xl border",children:[e.jsx(w,{onClick:j,disabled:a===0,children:e.jsx(A,{})}),e.jsxs("h1",{className:"text-xl font-semibold text-gray-700",children:["Section ",a+1,": ",i==null?void 0:i.title]}),e.jsx(w,{onClick:m,disabled:a===n.length-1,children:e.jsx(E,{})})]}),e.jsxs("div",{className:"bg-white shadow-md rounded-xl border p-6",children:[i.type==="quiz"&&e.jsx(_,{section:i,sectionResponse:u}),i.type==="coding"&&e.jsx($,{section:i,sectionResponse:u})]}),e.jsxs("div",{className:"flex justify-between mt-6",children:[e.jsx("button",{onClick:j,disabled:a===0,className:"px-4 py-2 rounded-md bg-gray-200 disabled:opacity-50",children:"Previous"}),e.jsx("button",{onClick:m,disabled:a===n.length-1,className:"px-4 py-2 rounded-md bg-blue-600 text-white disabled:opacity-50",children:"Next"})]})]})},_=({section:d,sectionResponse:r})=>{var o;return e.jsx("div",{className:"space-y-6",children:(o=d==null?void 0:d.questions)==null?void 0:o.map((t,h)=>{var a,c,x;const l=(c=(a=r==null?void 0:r.quizAnswers)==null?void 0:a[0])==null?void 0:c[t==null?void 0:t._id];return console.log(l),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-200",children:[e.jsx("pre",{className:"text-lg font-medium text-gray-900 mb-3",children:`Q${h+1}. ${t.question}`}),e.jsx("div",{children:t.answer&&e.jsxs(e.Fragment,{children:[e.jsx("label",{className:"text-xs",htmlFor:"",children:"Correct Answer"}),e.jsx("pre",{className:"bg-gray-50 px-4 py-3 rounded-lg border-2 border-gray-100",children:t.answer}),e.jsx("label",{className:"text-xs",htmlFor:"",children:"Your Answer"}),e.jsx("pre",{className:`bg-gray-50 px-4 py-3 rounded-lg border-[1px] ${l!==(t==null?void 0:t.answer)?"border-red-500":"border-green-100"}`,children:l??"Not Attempted"})]})}),e.jsx("div",{className:"flex flex-col gap-3",children:(x=t==null?void 0:t.options)==null?void 0:x.map((s,n)=>{const m=s==null?void 0:s.isCorrect,j=(t==null?void 0:t.category)=="MSQ"?l==null?void 0:l.includes(s==null?void 0:s.text):l===(s==null?void 0:s.text);return e.jsxs("div",{className:`
                      px-4 py-3 rounded-md border 
                      flex justify-between items-center
                      ${m?"bg-green-100 border-green-400":"bg-white"}
                      ${j&&!m?"bg-red-100 border-red-400":""}
                    `,children:[e.jsx("span",{className:"text-gray-900",children:s==null?void 0:s.text}),e.jsxs("div",{className:"flex gap-3 text-sm",children:[m&&e.jsx("span",{className:"text-green-700 font-semibold",children:"âœ“ Correct"}),j&&e.jsx("span",{className:"text-blue-700 font-semibold",children:"Your Answer"})]})]},n)})})]},t==null?void 0:t._id)})})},$=({section:d,sectionResponse:r})=>{var o;return e.jsx("div",{className:"space-y-10",children:(o=d==null?void 0:d.problems)==null?void 0:o.map(t=>{var h,l,a,c,x;return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:t==null?void 0:t.title}),e.jsx(g,{title:"Description",children:e.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:t.description})}),((h=t.constraints)==null?void 0:h.length)>0&&e.jsx(g,{title:"Constraints",children:e.jsx("ul",{className:"list-disc pl-6 text-gray-700",children:t.constraints.map((s,n)=>e.jsx("li",{children:s},n))})}),((l=t.examples)==null?void 0:l.length)>0&&e.jsx(g,{title:"Examples",children:t.examples.map((s,n)=>e.jsxs("div",{className:"bg-gray-100 p-4 rounded-md border mb-4",children:[e.jsx("p",{className:"font-medium text-gray-800",children:"Input:"}),e.jsx("pre",{className:"text-gray-700",children:s.input}),e.jsx("p",{className:"font-medium text-gray-800 mt-2",children:"Output:"}),e.jsx("pre",{className:"text-gray-700",children:s.output}),s.explanation&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-medium text-gray-800 mt-2",children:"Explanation:"}),e.jsx("pre",{className:"text-gray-700",children:s.explanation})]})]},n))}),e.jsx(g,{title:"Your Submitted Code",children:e.jsx("pre",{className:"bg-black text-green-400 p-4 rounded-lg overflow-auto text-sm",children:((a=r==null?void 0:r.codingAnswers[0][t._id])==null?void 0:a.code)||""})}),e.jsx(g,{title:"Testcases",children:e.jsx("pre",{className:"bg-gray-900 text-gray-200 p-4 rounded-lg overflow-auto text-sm",children:((c=r==null?void 0:r.codingAnswers[0][t._id])==null?void 0:c.total)??0})}),e.jsx(g,{title:"Passed",children:e.jsx("pre",{className:"bg-gray-800 text-white p-4 rounded-lg text-sm",children:String((x=r==null?void 0:r.codingAnswers[0][t._id])==null?void 0:x.passed)??0})})]},t==null?void 0:t._id)})})},g=({title:d,children:r})=>e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow border border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-3",children:d}),r]});export{F as default};
