import{c as C,r as d,q as D,a as S,bv as w,j as e,D as q,d as P,B as T}from"./index-BeEp3EVh.js";import{D as W}from"./Dialog-DNvKGslc.js";import{D as N,a as E}from"./DialogTitle-X9tLtA6v.js";import{D as k}from"./DialogContent-ighP-z5J.js";import{T as s}from"./TextField-CQiHGjoI.js";import{M as n}from"./MenuItem-Cd46xDOs.js";import{B as h}from"./Button-A8_c9rlu.js";import"./Paper-B2dH_Nge.js";import"./Typography-CNREvQFP.js";import"./index-lr4LFT-3.js";import"./extendSxProp-vjBWI7uh.js";import"./Select-Kpxm0_Lx.js";import"./Menu-DZv0geZK.js";import"./index-DKQCrIQi.js";import"./useSlotProps-DEe153wL.js";import"./Grow-mb0ICMVC.js";import"./mergeSlotProps-6uoQtzaA.js";import"./dividerClasses-BlrSQXrQ.js";const B={name:"",description:"",duration:"",visibility:"private",category:"Placements"};function Z({setModalClose:o,onTestCreated:f=()=>{}}){const{enqueueSnackbar:u}=C(),[t,x]=d.useState(B),[c,m]=d.useState(!1),[p,F]=d.useState(null),g=D(),i=r=>{const{name:l,value:a}=r.target;x(y=>({...y,[l]:a}))},{user:v}=S(r=>r.auth),b=w(),j=async()=>{var r,l;if(!t.name||!t.duration||!t.visibility||!t.category){u("Please fill all required fields âš ï¸",{variant:"warning"});return}try{m(!0);const a=await P.post(`${T}/api/admin/tests/add`,{...t,duration:Number(t.duration),creator:v._id},{withCredentials:!0});await b.invalidateQueries({queryKey:["admin-test"]}),f(a.data.data),o(!1),g("/admin/edit/test/"+a.data.data),u("Test created successfully ðŸŽ‰",{variant:"success"})}catch(a){console.error("Error creating test:",a),u(((l=(r=a.response)==null?void 0:r.data)==null?void 0:l.error)||"Something went wrong âŒ",{variant:"error"})}finally{m(!1)}};return e.jsxs(W,{open:!0,onClose:()=>o(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(N,{children:"Create New Test"}),e.jsxs(k,{dividers:!0,className:"flex flex-col gap-4 pt-4",children:[e.jsx(s,{label:"Test Name",name:"name",value:t.name,onChange:i,fullWidth:!0,required:!0}),e.jsx(s,{label:"Description",name:"description",value:t.description,onChange:i,multiline:!0,rows:3,fullWidth:!0}),e.jsx(s,{label:"Duration (in minutes)",name:"duration",type:"number",value:t.duration,onChange:i,fullWidth:!0,required:!0}),e.jsxs(s,{label:"Visibility",name:"visibility",value:t.visibility,onChange:i,select:!0,fullWidth:!0,children:[e.jsx(n,{value:"private",children:"Private"}),e.jsx(n,{value:"public",children:"Public"}),e.jsx(n,{value:"group",children:"Group"})]}),e.jsxs(s,{label:"Category",name:"category",value:t.category,onChange:i,select:!0,fullWidth:!0,children:[e.jsx(n,{value:"Placements",children:"Placements"}),e.jsx(n,{value:"Gate",children:"Gate"})]}),p&&e.jsx("p",{className:"text-red-600 text-sm",children:p})]}),e.jsxs(E,{children:[e.jsx(h,{onClick:()=>o(!1),disabled:c,children:"Cancel"}),e.jsx(h,{onClick:j,variant:"contained",disabled:c,children:c?e.jsx(q,{size:20}):"Create"})]})]})}export{Z as default};
