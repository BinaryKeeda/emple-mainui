import{ag as rr,af as ar,r as v,ah as er,b3 as k,a5 as tr,a3 as A,j as e,b0 as c,ai as or,aj as ir,b1 as nr,h as sr,e as lr,d as cr,B as dr,R as gr,by as pr,u as mr,c as hr,b as j,o as ur,I as S,ac as xr,ad as fr}from"./index-5IQCZWui.js";import{u as vr}from"./useQuery-C3nZ_t6E.js";import{u as br,G as yr}from"./api-CGi1rUhR.js";import{D as Or}from"./Drawer-B26lk9zD.js";import{D as F}from"./Divider-D6GH9AmA.js";import{S as jr,P as Cr}from"./ShortText-883005E1.js";import{B as Rr}from"./Box-BwDpFZSy.js";import{T as L}from"./Typography-BjSHW2wE.js";import{u as U}from"./usePreviousProps-CeN7NPEh.js";function Nr(a){const{badgeContent:r,invisible:t=!1,max:i=99,showZero:s=!1}=a,d=U({badgeContent:r,max:i});let l=t;t===!1&&r===0&&!s&&(l=!0);const{badgeContent:o,max:n=i}=l?d:a,g=o&&Number(o)>n?`${n}+`:o;return{badgeContent:o,invisible:l,max:n,displayValue:g}}function Br(a){return ar("MuiBadge",a)}const p=rr("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),C=10,R=4,Pr=a=>{const{color:r,anchorOrigin:t,invisible:i,overlap:s,variant:d,classes:l={}}=a,o={root:["root"],badge:["badge",d,i&&"invisible",`anchorOrigin${c(t.vertical)}${c(t.horizontal)}`,`anchorOrigin${c(t.vertical)}${c(t.horizontal)}${c(s)}`,`overlap${c(s)}`,r!=="default"&&`color${c(r)}`]};return or(o,Br,l)},Tr=A("span",{name:"MuiBadge",slot:"Root",overridesResolver:(a,r)=>r.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),zr=A("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(a,r)=>{const{ownerState:t}=a;return[r.badge,r[t.variant],r[`anchorOrigin${c(t.anchorOrigin.vertical)}${c(t.anchorOrigin.horizontal)}${c(t.overlap)}`],t.color!=="default"&&r[`color${c(t.color)}`],t.invisible&&r.invisible]}})(ir(({theme:a})=>({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:a.typography.fontFamily,fontWeight:a.typography.fontWeightMedium,fontSize:a.typography.pxToRem(12),minWidth:C*2,lineHeight:1,padding:"0 6px",height:C*2,borderRadius:C,zIndex:1,transition:a.transitions.create("transform",{easing:a.transitions.easing.easeInOut,duration:a.transitions.duration.enteringScreen}),variants:[...Object.entries(a.palette).filter(nr(["contrastText"])).map(([r])=>({props:{color:r},style:{backgroundColor:(a.vars||a).palette[r].main,color:(a.vars||a).palette[r].contrastText}})),{props:{variant:"dot"},style:{borderRadius:R,height:R*2,minWidth:R*2,padding:0}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="top"&&r.anchorOrigin.horizontal==="right"&&r.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${p.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="bottom"&&r.anchorOrigin.horizontal==="right"&&r.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${p.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="top"&&r.anchorOrigin.horizontal==="left"&&r.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${p.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="bottom"&&r.anchorOrigin.horizontal==="left"&&r.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${p.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="top"&&r.anchorOrigin.horizontal==="right"&&r.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${p.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="bottom"&&r.anchorOrigin.horizontal==="right"&&r.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${p.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="top"&&r.anchorOrigin.horizontal==="left"&&r.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${p.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="bottom"&&r.anchorOrigin.horizontal==="left"&&r.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${p.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:a.transitions.create("transform",{easing:a.transitions.easing.easeInOut,duration:a.transitions.duration.leavingScreen})}}]})));function w(a){return{vertical:(a==null?void 0:a.vertical)??"top",horizontal:(a==null?void 0:a.horizontal)??"right"}}const $r=v.forwardRef(function(r,t){const i=er({props:r,name:"MuiBadge"}),{anchorOrigin:s,className:d,classes:l,component:o,components:n={},componentsProps:g={},children:u,overlap:x="rectangular",color:f="default",invisible:b=!1,max:_=99,badgeContent:N,slots:m,slotProps:h,showZero:B=!1,variant:y="standard",...E}=i,{badgeContent:P,invisible:H,max:M,displayValue:Z}=Nr({max:_,invisible:b,badgeContent:N,showZero:B}),V=U({anchorOrigin:w(s),color:f,overlap:x,variant:y,badgeContent:N}),T=H||P==null&&y!=="dot",{color:W=f,overlap:q=x,anchorOrigin:G,variant:z=y}=T?V:i,Q=w(G),$=z!=="dot"?Z:void 0,O={...i,badgeContent:P,invisible:T,max:M,displayValue:$,showZero:B,anchorOrigin:Q,color:W,overlap:q,variant:z},D=Pr(O),I={slots:{root:(m==null?void 0:m.root)??n.Root,badge:(m==null?void 0:m.badge)??n.Badge},slotProps:{root:(h==null?void 0:h.root)??g.root,badge:(h==null?void 0:h.badge)??g.badge}},[K,J]=k("root",{elementType:Tr,externalForwardedProps:{...I,...E},ownerState:O,className:tr(D.root,d),ref:t,additionalProps:{as:o}}),[X,Y]=k("badge",{elementType:zr,externalForwardedProps:I,ownerState:O,className:D.badge});return e.jsxs(K,{...J,children:[u,e.jsx(X,{...Y,children:$})]})}),Dr=sr("Cart20Regular","20",["M3 3.5c0-.28.22-.5.5-.5h.44c.72 0 1.14.47 1.38.94.17.32.29.72.39 1.06H16a1 1 0 0 1 .96 1.27l-1.5 5.28A2 2 0 0 1 13.55 13H8.46a2 2 0 0 1-1.93-1.47L5.9 9.17l-.01-.03-1.03-3.5-.1-.33a5.2 5.2 0 0 0-.32-.91c-.16-.31-.3-.4-.5-.4H3.5a.5.5 0 0 1-.5-.5Zm3.84 5.37.66 2.4a1 1 0 0 0 .96.73h5.08a1 1 0 0 0 .96-.73L16 6H6l.84 2.87ZM10 15.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm-1 0a.5.5 0 1 0-1 0 .5.5 0 0 0 1 0Zm6 0a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm-1 0a.5.5 0 1 0-1 0 .5.5 0 0 0 1 0Z"]),Ir=lr(e.jsx("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2m6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1z"}),"Notifications"),kr="#1d1e20",Sr=async a=>(await br.get(yr.GET_USER_INVITE+a)).data,Lr=({userId:a})=>vr({queryKey:["inviteData",a],queryFn:()=>Sr(a),onSuccess:(r,t,i)=>{i.queryClient.invalidateQueries(["inviteData",a]),i.queryClient.invalidateQueries(["groupData",a])}});function wr({notificationOpen:a,setNotificationOpen:r,userId:t,refreshInvites:i}){var l;const{data:s}=Lr({userId:t}),d=async(o,n,g)=>{try{await cr.post(dr+"/api/data/invites/respond",{inviteId:o,accept:n==="accept",section:g},{withCredentials:!0})}catch(u){console.error("Error responding to invite:",u)}};return e.jsx(Or,{anchor:"right",open:a,onClose:()=>r(!1),children:e.jsxs("div",{className:"w-80 p-4",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Notifications"}),e.jsx(F,{className:"mb-2"}),e.jsx("ul",{className:"space-y-4 mt-3",children:(l=s==null?void 0:s.data)!=null&&l.length?s.data.map(o=>{var n;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-xl shadow-sm border",children:[e.jsxs("div",{className:"text-sm",children:[e.jsxs("p",{className:"font-medium",children:[(n=o.invitedBy)==null?void 0:n.name," invited you to join a group"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Role: ",o.role," ·"," ",new Date(o.createdAt).toLocaleString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>d(o._id,"accept",o.sectionId),className:"px-2 py-1 text-xs rounded-lg bg-green-500 text-white hover:bg-green-600",children:"✅"}),e.jsx("button",{onClick:()=>d(o._id,"reject",o.sectionId),className:"px-2 py-1 text-xs rounded-lg bg-red-500 text-white hover:bg-red-600",children:"❌"})]})]},o._id)}):e.jsx("li",{className:"text-sm text-gray-500",children:"No pending invites"})})]})})}const Wr=gr.memo(({user:a,menuOpen:r,setMenuOpen:t})=>{const{toggleTheme:i,theme:s}=v.useContext(pr),d=mr(),[l,o]=v.useState(!1),[n,g]=v.useState(0),u=()=>{try{d(xr(fr.get("token")))}catch(b){console.log(b,"logout")}},x=()=>{o(!0),g(0)},{enqueueSnackbar:f}=hr();return e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"relative h-[59px]",children:e.jsxs("nav",{className:`fixed shadow-sm bg-white dark:bg-support dark:text-gray-50 bg-blend-difference text-gray-600 h-[59px] items-center pr-5 pl-2 flex justify-between z-40 w-full top-0 dark:bg-[${kr}]`,children:[e.jsx("div",{className:"lg:hidden",children:e.jsx(jr,{onClick:()=>t(!r)})}),e.jsx("div",{className:"flex md:ml-[100px] gap-1 items-center",children:e.jsx(j,{to:"/",children:e.jsx("img",{src:ur,className:"h-10",alt:"Logo"})})}),e.jsx("div",{className:"flex items-center gap-3",children:a?e.jsxs(e.Fragment,{children:[e.jsxs(Rr,{onClick:()=>{f("Coming soon",{variant:"warning"})},sx:{display:"flex",cursor:"pointer",alignItems:"center",gap:1.5,padding:"6px 12px",border:"1px solid #e1e1e1",borderRadius:"8px",backgroundColor:"#f9f9f9",width:"fit-content",boxShadow:"0px 1px 3px rgba(0,0,0,0.1)"},children:[e.jsx(L,{sx:{fontSize:"14px",color:"#555"},children:"Credits"}),e.jsx(L,{variant:"body2",sx:{fontSize:"14px",fontWeight:600,color:"#111"},children:"85.00"}),e.jsx(Dr,{})]}),e.jsx(S,{"aria-label":"notifications",onClick:x,children:e.jsx($r,{badgeContent:n,color:"error",overlap:"circular",children:e.jsx(Ir,{})})}),e.jsx(S,{onClick:u,children:e.jsx(Cr,{})})]}):e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j,{to:"/login",className:"text-sm font-medium hover:underline",children:"Login"}),e.jsx(F,{orientation:"vertical",flexItem:!0,sx:{bgcolor:"grey.500"}}),e.jsx(j,{to:"/register",className:"text-sm font-medium hover:underline",children:"Signup"})]})})]})}),e.jsx(wr,{userId:a==null?void 0:a._id,notificationOpen:l,setNotificationOpen:o})]})});export{Wr as H};
