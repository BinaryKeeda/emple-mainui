import{a as y,u as b,r as i,aS as g,d as u,B as p,j as e,D as j,m as w}from"./index-CYu2G9Yr.js";import{A as S}from"./Autocomplete-Dnokmq7H.js";import{T as C}from"./TextField-C7K6QSL7.js";import"./Select-LNN0C9hj.js";import"./Menu-CZPB9pxj.js";import"./index-DWgPc5xO.js";import"./useSlotProps-iwC-JmkQ.js";import"./Paper-D3Ku-0tF.js";import"./Grow-D9615lWO.js";import"./mergeSlotProps-WB-Ig9Yo.js";import"./index-foEhQGiw.js";import"./extendSxProp-DQ9tlt4s.js";import"./Close-M_zBDAIH.js";import"./usePreviousProps-BQH-aJ-D.js";import"./Popper-L1q4e0Br.js";import"./Chip-BSULjlA8.js";function _(){const{user:n}=y(t=>t.auth),d=b(),[r,m]=i.useState((n==null?void 0:n.university)||""),[h,f]=i.useState([]),[a,l]=i.useState(!1),c=i.useMemo(()=>g(async t=>{if(t){l(!0);try{const o=(await u.get(`${p}/api/university/${t}`,{withCredentials:!0})).data.map(v=>v.name);f(o.includes("Others")?o:[...o,"Others"])}catch(s){console.error(s)}finally{l(!1)}}},500),[]);i.useEffect(()=>{r&&c(r)},[r]);const x=async()=>{try{const t=await u.put(`${p}/api/profile/complete`,{university:r,id:n._id},{withCredentials:!0});d(w(t.data.user))}catch(t){console.error("Error updating university:",t)}};return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/40 backdrop-blur-sm z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl w-[90%] max-w-md shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Select Your University"}),e.jsx(S,{fullWidth:!0,loading:a,options:h,value:r,onChange:(t,s)=>m(s),onInputChange:(t,s)=>c(s),renderInput:t=>e.jsx(C,{...t,label:"University",variant:"outlined",InputProps:{...t.InputProps,endAdornment:e.jsxs(e.Fragment,{children:[a?e.jsx(j,{size:20}):null,t.InputProps.endAdornment]})}})}),e.jsx("button",{onClick:x,className:"mt-6 w-full py-2.5 bg-black text-white rounded-full",children:"Save University"})]})})}export{_ as default};
