import{e as v,j as e,r as u,i as S,I as w,am as A,d as C,B as I}from"./index-Yqgfe9qv.js";const E=v(e.jsx("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos"),T=()=>{const[d,r]=u.useState(null),[i,t]=u.useState(null),[c,x]=u.useState(!0),[s,n]=u.useState(0),{id:g}=S();if(u.useEffect(()=>{(async()=>{var f;try{const b=await C.get(`${I}/api/test/response/${g}`,{withCredentials:!0});if((f=b.data)!=null&&f.status){const y=b.data.data;r(y),t(computeAnalysis(y.response,y.testSnapshot))}}catch(b){console.error("Error fetching preview:",b.message)}finally{x(!1)}})()},[g]),c)return e.jsx("p",{className:"text-center py-6",children:"Loading..."});if(!d)return e.jsx("p",{className:"text-center text-red-500 py-6",children:"No data found"});const{response:a,testSnapshot:o}=d;if(!a||a.length===0)return e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Test Preview"}),e.jsx("p",{className:"mt-4 text-red-500",children:"No responses available for this test."})]});const h=()=>{s<o.length-1&&n(s+1)},j=()=>{s>0&&n(s-1)},l=o[s],p=a.find(N=>N.sectionId===(l==null?void 0:l.sectionId));return e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 text-gray-800",children:"Test Preview"}),e.jsxs("div",{className:"flex items-center justify-between mb-6 bg-white shadow p-4 rounded-xl border",children:[e.jsx(w,{onClick:j,disabled:s===0,children:e.jsx(A,{})}),e.jsxs("h1",{className:"text-xl font-semibold text-gray-700",children:["Section ",s+1,": ",l==null?void 0:l.title]}),e.jsx(w,{onClick:h,disabled:s===o.length-1,children:e.jsx(E,{})})]}),e.jsxs("div",{className:"bg-white shadow-md rounded-xl border p-6",children:[l.type==="quiz"&&e.jsx(_,{section:l,sectionResponse:p}),l.type==="coding"&&e.jsx(k,{section:l,sectionResponse:p})]}),e.jsxs("div",{className:"flex justify-between mt-6",children:[e.jsx("button",{onClick:j,disabled:s===0,className:"px-4 py-2 rounded-md bg-gray-200 disabled:opacity-50",children:"Previous"}),e.jsx("button",{onClick:h,disabled:s===o.length-1,className:"px-4 py-2 rounded-md bg-blue-600 text-white disabled:opacity-50",children:"Next"})]})]})},_=({section:d,sectionResponse:r})=>{var i;return e.jsx("div",{className:"space-y-6",children:(i=d==null?void 0:d.questions)==null?void 0:i.map((t,c)=>{var s,n,g;const x=(n=(s=r==null?void 0:r.quizAnswers)==null?void 0:s[0])==null?void 0:n[t==null?void 0:t._id];return e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:`Q${c+1}. ${t.question}`}),e.jsx("div",{className:"flex flex-col gap-3",children:(g=t==null?void 0:t.options)==null?void 0:g.map((a,o)=>{const h=a==null?void 0:a.isCorrect,j=x===(a==null?void 0:a.text);return e.jsxs("div",{className:`
                      px-4 py-3 rounded-md border 
                      flex justify-between items-center
                      ${h?"bg-green-100 border-green-400":"bg-white"}
                      ${j&&!h?"bg-red-100 border-red-400":""}
                    `,children:[e.jsx("span",{className:"text-gray-900",children:a==null?void 0:a.text}),e.jsxs("div",{className:"flex gap-3 text-sm",children:[h&&e.jsx("span",{className:"text-green-700 font-semibold",children:"âœ“ Correct"}),j&&e.jsx("span",{className:"text-blue-700 font-semibold",children:"Your Answer"})]})]},o)})})]},t==null?void 0:t._id)})})},k=({section:d,sectionResponse:r})=>{var i;return e.jsx("div",{className:"space-y-10",children:(i=d==null?void 0:d.problems)==null?void 0:i.map(t=>{var c,x;return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:t.title}),e.jsx(m,{title:"Description",children:e.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:t.description})}),((c=t.constraints)==null?void 0:c.length)>0&&e.jsx(m,{title:"Constraints",children:e.jsx("ul",{className:"list-disc pl-6 text-gray-700",children:t.constraints.map((s,n)=>e.jsx("li",{children:s},n))})}),((x=t.examples)==null?void 0:x.length)>0&&e.jsx(m,{title:"Examples",children:t.examples.map((s,n)=>e.jsxs("div",{className:"bg-gray-100 p-4 rounded-md border mb-4",children:[e.jsx("p",{className:"font-medium text-gray-800",children:"Input:"}),e.jsx("pre",{className:"text-gray-700",children:s.input}),e.jsx("p",{className:"font-medium text-gray-800 mt-2",children:"Output:"}),e.jsx("pre",{className:"text-gray-700",children:s.output}),s.explanation&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-medium text-gray-800 mt-2",children:"Explanation:"}),e.jsx("pre",{className:"text-gray-700",children:s.explanation})]})]},n))}),e.jsx(m,{title:"Your Submitted Code",children:e.jsx("pre",{className:"bg-black text-green-400 p-4 rounded-lg overflow-auto text-sm",children:r==null?void 0:r.codingAnswers[0][t._id].code})}),e.jsx(m,{title:"Testcases",children:e.jsx("pre",{className:"bg-gray-900 text-gray-200 p-4 rounded-lg overflow-auto text-sm",children:r==null?void 0:r.codingAnswers[0][t._id].total})}),e.jsx(m,{title:"Passed",children:e.jsx("pre",{className:"bg-gray-800 text-white p-4 rounded-lg text-sm",children:String(r==null?void 0:r.codingAnswers[0][t._id].passed)})})]},t._id)})})},m=({title:d,children:r})=>e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow border border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-3",children:d}),r]});export{T as default};
