import{r as s,c as W,q as F,j as e,D as N,d as x,B as v}from"./index-CjXME-GI.js";import{D as k}from"./Dialog-Cp9HEfF-.js";import{D as B,a as L}from"./DialogTitle-B46jDrMS.js";import{D as P}from"./DialogContent-apNl-Ob3.js";import{T as i}from"./TextField-iYLhbqRU.js";import{b as o,a as w,S as M}from"./Select-D8ve7tdM.js";import{M as n}from"./MenuItem-CpOq8cMH.js";import{A as O}from"./Autocomplete-BR7q5Qf3.js";import{B as j}from"./Button-B_4OIuZq.js";import"./Paper-Dd3Nq_DI.js";import"./Typography-BKbN5UaP.js";import"./index-BO6ivUTv.js";import"./extendSxProp-GEP28eHm.js";import"./Menu-d--EVQ8K.js";import"./index-DpXKAnFK.js";import"./useSlotProps-C8YCOaFa.js";import"./Grow-WgU6DWN0.js";import"./mergeSlotProps-FJ83UI0X.js";import"./dividerClasses-B0r3IfK5.js";import"./Close-BXPm31FX.js";import"./usePreviousProps-jFWskjC-.js";import"./Popper-J8XcBOvh.js";import"./Chip-Dh4H8U1J.js";const _=["private","public","group"];function ct({onClose:a}){const[l,b]=s.useState(""),[u,C]=s.useState("private"),[c,y]=s.useState(!1),[S,I]=s.useState(""),[A,D]=s.useState([]),[p,E]=s.useState(""),[m,d]=s.useState(!1),{enqueueSnackbar:h}=W(),g=async(t="")=>{try{d(!0);const f=(await x.get(`${v}/api/admin/groups?search=${t}&withOwner=false`,{withCredentials:!0})).data.groups;console.log("Fetched campus groups:",f),D(f)}catch(r){console.error("Error fetching groups:",r)}finally{d(!1)}};s.useEffect(()=>{g(p)},[p]),s.useEffect(()=>{g("")},[]);const G=F(),T=async()=>{try{const r=(await x.post(`${v}/api/admin/campus/test/add`,{name:l,visibility:u,isAvailable:c,groupId:S},{withCredentials:!0})).data.test._id;G("/admin/edit/campustest/"+r),h("Campus test created successfully ðŸŽ‰",{variant:"success"}),a()}catch(t){console.error("Error creating test",t),h("Failed to create campus test âŒ",{variant:"error"})}};return e.jsxs(k,{open:!0,onClose:a,fullWidth:!0,maxWidth:"sm",children:[e.jsx(B,{children:"Create New Test"}),e.jsxs(P,{dividers:!0,children:[e.jsx(i,{fullWidth:!0,label:"Name",value:l,onChange:t=>b(t.target.value),margin:"normal"}),e.jsxs(o,{fullWidth:!0,margin:"normal",children:[e.jsx(w,{children:"Visibility"}),e.jsx(M,{value:u,label:"Visibility",onChange:t=>C(t.target.value),children:_.map(t=>e.jsx(n,{value:t,children:t},t))})]}),e.jsx(o,{fullWidth:!0,margin:"normal",children:e.jsx(O,{options:A,getOptionLabel:t=>t.groupName||"",onInputChange:(t,r)=>E(r),onChange:(t,r)=>I((r==null?void 0:r._id)||""),loading:m,renderInput:t=>e.jsx(i,{...t,label:"Search Campus Groups",InputProps:{...t.InputProps,endAdornment:e.jsxs(e.Fragment,{children:[m&&e.jsx(N,{color:"inherit",size:20}),t.InputProps.endAdornment]})}})})}),e.jsx(o,{fullWidth:!0,margin:"normal",children:e.jsxs(i,{label:"Availibility",select:!0,native:!0,value:c,onChange:t=>y(t.target.value==="true"),children:[e.jsx(n,{value:"false",children:"No"}),e.jsx(n,{value:"true",children:"Yes"})]})})]}),e.jsxs(L,{children:[e.jsx(j,{onClick:a,children:"Cancel"}),e.jsx(j,{variant:"contained",onClick:T,children:"Create"})]})]})}export{ct as default};
