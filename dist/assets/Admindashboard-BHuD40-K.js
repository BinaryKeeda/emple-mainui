import{r as l,x as w,j as e,y as N,z,A as S,ao as I,e as m,a as u,I as M,b as x,d as C,R as v,be as k,u as L,o as H,al as O,am as D,s as b,V as A,L as V}from"./index-DA7-g0Ll.js";import{B}from"./Box-o-cAU5RS.js";import{T as R}from"./Tooltip-DGBq536Y.js";import{A as f}from"./Avatar-fu7XpCgO.js";import{L as T,M as P}from"./Menu-BiAgDVMQ.js";import{g as E,M as j}from"./MenuItem-Dnl3aj77.js";import{P as F}from"./PowerSettingsNew-Hbugbse4.js";import{D as U}from"./Drawer-JjNZNglL.js";import{D as y}from"./Divider-OcCMvkHj.js";import{S as $}from"./ShortText-CA5kHEPa.js";import{D as _}from"./DashboardOutlined-nQjsgw8O.js";import"./extendSxProp-DDTr-WSl.js";import"./index-Dhsm6CAP.js";import"./Grow-tOfnXeEF.js";import"./Popper-BuJ16Cy2.js";import"./useSlotProps-C_B74D1z.js";import"./Paper-AhsLYu9a.js";import"./mergeSlotProps-DWdAKzNc.js";import"./dividerClasses-3pQn5SG5.js";const G=a=>{const{alignItems:o,classes:n}=a;return S({root:["root",o==="flex-start"&&"alignItemsFlexStart"]},E,n)},Q=N("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:n}=a;return[o.root,n.alignItems==="flex-start"&&o.alignItemsFlexStart]}})(I(({theme:a})=>({minWidth:56,color:(a.vars||a).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}))),q=l.forwardRef(function(o,n){const r=w({props:o,name:"MuiListItemIcon"}),{className:s,...t}=r,i=l.useContext(T),c={...r,alignItems:i.alignItems},d=G(c);return e.jsx(Q,{className:z(d.root,s),ownerState:c,ref:n,...t})}),W=m(e.jsx("path",{d:"M13 7.5h5v2h-5zm0 7h5v2h-5zM19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16H5V5h14zM11 6H6v5h5zm-1 4H7V7h3zm1 3H6v5h5zm-1 4H7v-3h3z"}),"BallotOutlined"),Y=m(e.jsx("path",{d:"M9 13.75c-2.34 0-7 1.17-7 3.5V19h14v-1.75c0-2.33-4.66-3.5-7-3.5M4.34 17c.84-.58 2.87-1.25 4.66-1.25s3.82.67 4.66 1.25zM9 12c1.93 0 3.5-1.57 3.5-3.5S10.93 5 9 5 5.5 6.57 5.5 8.5 7.07 12 9 12m0-5c.83 0 1.5.67 1.5 1.5S9.83 10 9 10s-1.5-.67-1.5-1.5S8.17 7 9 7m7.04 6.81c1.16.84 1.96 1.96 1.96 3.44V19h4v-1.75c0-2.02-3.5-3.17-5.96-3.44M15 12c1.93 0 3.5-1.57 3.5-3.5S16.93 5 15 5c-.54 0-1.04.13-1.5.35.63.89 1 1.98 1 3.15s-.37 2.26-1 3.15c.46.22.96.35 1.5.35"}),"GroupOutlined"),J=m([e.jsx("path",{d:"M22 21c-1.11 0-1.73-.37-2.18-.64-.37-.22-.6-.36-1.15-.36-.56 0-.78.13-1.15.36-.46.27-1.07.64-2.18.64s-1.73-.37-2.18-.64c-.37-.22-.6-.36-1.15-.36-.56 0-.78.13-1.15.36-.46.27-1.08.64-2.19.64s-1.73-.37-2.18-.64c-.37-.23-.6-.36-1.15-.36s-.78.13-1.15.36c-.46.27-1.08.64-2.19.64v-2c.56 0 .78-.13 1.15-.36.46-.27 1.08-.64 2.19-.64s1.73.37 2.18.64c.37.23.59.36 1.15.36s.78-.13 1.15-.36c.46-.27 1.08-.64 2.19-.64s1.73.37 2.18.64c.37.22.6.36 1.15.36s.78-.13 1.15-.36c.45-.27 1.07-.64 2.18-.64s1.73.37 2.18.64c.37.23.59.36 1.15.36zm0-4.5c-1.11 0-1.73-.37-2.18-.64-.37-.22-.6-.36-1.15-.36-.56 0-.78.13-1.15.36-.45.27-1.07.64-2.18.64s-1.73-.37-2.18-.64c-.37-.22-.6-.36-1.15-.36-.56 0-.78.13-1.15.36-.45.27-1.07.64-2.18.64s-1.73-.37-2.18-.64c-.37-.22-.6-.36-1.15-.36s-.78.13-1.15.36c-.47.27-1.09.64-2.2.64v-2c.56 0 .78-.13 1.15-.36.45-.27 1.07-.64 2.18-.64s1.73.37 2.18.64c.37.22.6.36 1.15.36.56 0 .78-.13 1.15-.36.45-.27 1.07-.64 2.18-.64s1.73.37 2.18.64c.37.22.6.36 1.15.36s.78-.13 1.15-.36c.45-.27 1.07-.64 2.18-.64s1.73.37 2.18.64c.37.22.6.36 1.15.36v2zM8.67 12c.56 0 .78-.13 1.15-.36.46-.27 1.08-.64 2.19-.64s1.73.37 2.18.64c.37.22.6.36 1.15.36s.78-.13 1.15-.36c.12-.07.26-.15.41-.23L10.48 5C8.93 3.45 7.5 2.99 5 3v2.5c1.82-.01 2.89.39 4 1.5l1 1-3.25 3.25c.31.12.56.27.77.39.37.23.59.36 1.15.36"},"0"),e.jsx("circle",{cx:"16.5",cy:"5.5",r:"2.5"},"1")],"Pool"),K=m(e.jsx("path",{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m0 14H8V4h12zm-6.49-5.84c.41-.73 1.18-1.16 1.63-1.8.48-.68.21-1.94-1.14-1.94-.88 0-1.32.67-1.5 1.23l-1.37-.57C11.51 5.96 12.52 5 13.99 5c1.23 0 2.08.56 2.51 1.26.37.6.58 1.73.01 2.57-.63.93-1.23 1.21-1.56 1.81-.13.24-.18.4-.18 1.18h-1.52c.01-.41-.06-1.08.26-1.66m-.56 3.79c0-.59.47-1.04 1.05-1.04.59 0 1.04.45 1.04 1.04 0 .58-.44 1.05-1.04 1.05-.58 0-1.05-.47-1.05-1.05"}),"QuizOutlined"),X=m(e.jsx("path",{d:"M14 9v2h-3V9H8.5V7H11V1H4v6h2.5v2H4v6h2.5v2H4v6h7v-6H8.5v-2H11v-2h3v2h7V9zM6 3h3v2H6zm3 18H6v-2h3zm0-8H6v-2h3zm10 0h-3v-2h3z"}),"SchemaOutlined"),Z=({handleLogout:a})=>{var c,d,h,g;const[o,n]=l.useState(null),r=!!o,{user:s}=u(p=>p.auth),t=p=>{n(p.currentTarget)},i=()=>{n(null)};return e.jsxs(e.Fragment,{children:[e.jsx(B,{sx:{display:"flex",alignItems:"center",textAlign:"center"},children:e.jsx(R,{title:"Account settings",children:e.jsx(M,{onClick:t,size:"small",sx:{ml:2},"aria-controls":r?"account-menu":void 0,"aria-haspopup":"true","aria-expanded":r?"true":void 0,children:e.jsx(f,{src:s.avatar,sx:{width:32,height:32},children:((d=(c=s==null?void 0:s.name)==null?void 0:c[0])==null?void 0:d.toUpperCase())||"U"})})})}),e.jsxs(P,{anchorEl:o,id:"account-menu",open:r,onClose:i,onClick:i,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&::before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[e.jsx(x,{to:`/profile/${s._id}`,style:{textDecoration:"none",color:"inherit"},children:e.jsxs(j,{onClick:i,children:[e.jsxs(f,{src:s.avatar,children:[" ",((g=(h=s==null?void 0:s.name)==null?void 0:h[0])==null?void 0:g.toUpperCase())||"U"]})," ",e.jsx("small",{children:"Profile"})]})}),e.jsxs(j,{onClick:a,children:[e.jsx(q,{children:e.jsx(F,{})}),e.jsx("small",{children:"Logout"})]})]})]})};function ee({notificationOpen:a,setNotificationOpen:o,userId:n}){var s;const r=async(t,i)=>{try{await C.post(BASE_URL+"/api/data/invites/respond",{inviteId:t,accept:i==="accept"},{withCredentials:!0}),refreshInvites&&refreshInvites(),window.location.reload()}catch(c){console.error("Error responding to invite:",c)}};return e.jsx(U,{anchor:"right",open:a,onClose:()=>o(!1),children:e.jsxs("div",{className:"w-80 p-4",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Notifications"}),e.jsx(y,{className:"mb-2"}),e.jsx("ul",{className:"space-y-4 mt-3",children:(s=data==null?void 0:data.data)!=null&&s.length?data.data.map(t=>{var i;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-xl shadow-sm border",children:[e.jsxs("div",{className:"text-sm",children:[e.jsxs("p",{className:"font-medium",children:[(i=t.invitedBy)==null?void 0:i.name," invited you to join a group"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Role: ",t.role," ·"," ",new Date(t.createdAt).toLocaleString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>r(t._id,"accept"),className:"px-2 py-1 text-xs rounded-lg bg-green-500 text-white hover:bg-green-600",children:"✅"}),e.jsx("button",{onClick:()=>r(t._id,"reject"),className:"px-2 py-1 text-xs rounded-lg bg-red-500 text-white hover:bg-red-600",children:"❌"})]})]},t._id)}):e.jsx("li",{className:"text-sm text-gray-500",children:"No pending invites"})})]})})}const te=v.memo(({user:a,menuOpen:o,setMenuOpen:n})=>{const[r,s]=l.useState(!1),{toggleTheme:t,theme:i}=l.useContext(k),c=L(),d=()=>{try{console.log("Btn clicked"),c(O(D.get("token")))}catch(h){console.log(h,"logout")}};return e.jsx(e.Fragment,{children:e.jsx("header",{className:"relative h-[59px]",children:e.jsxs("nav",{className:"fixed shadow-sm bg-primary  dark:bg-support dark:text-gray-50 bg-blend-difference text-gray-600  h-[59px] items-center pr-5 pl-2  flex justify-between z-40 w-full top-0 ",children:[e.jsx("div",{className:"lg:hidden",children:e.jsx($,{onClick:()=>n(!o)})}),e.jsx("div",{className:"flex gap-1 items-center",children:e.jsx(x,{to:"/",children:e.jsx("img",{src:H,className:"h-10",alt:"Logo"})})}),e.jsx("div",{className:"flex items-center gap-3",children:a?e.jsx(e.Fragment,{children:e.jsx(Z,{handleLogout:d})}):e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(x,{to:"/login",className:"text-sm font-medium hover:underline",children:"Login"}),e.jsx(y,{orientation:"vertical",flexItem:!0,sx:{bgcolor:"grey.500"}}),e.jsx(x,{to:"/register",className:"text-sm font-medium hover:underline",children:"Signup"}),e.jsx(ee,{})]})})]})})})}),se=v.memo(({showMenu:a,setShowMenu:o})=>{const{user:n}=u(t=>t.auth),r=[{icon:e.jsx(_,{sx:{fontSize:"18px"}}),label:"Dashboard",path:"/admin/",type:"private"},{icon:e.jsx(K,{sx:{fontSize:"18px"}}),label:"Quiz",path:"/admin/quiz",type:"private"},{icon:e.jsx(W,{sx:{fontSize:"18px"}}),label:"Test",path:"/admin/test",type:"private"},{icon:e.jsx(X,{sx:{fontSize:"18px"}}),label:"Problems",path:"/admin/problems",type:"private"},{icon:e.jsx(J,{}),label:"Question Bank",path:"/admin/questionbank",type:"private"},{icon:e.jsx(Y,{sx:{fontSize:"18px"}}),label:"Groups",path:"/admin/groups",type:"private"}],s=b();return e.jsx(e.Fragment,{children:e.jsx("aside",{className:`
                    z-40 h-[calc(100vh-59px)] top-[60px] fixed left-0
                    bg-primary
                    transition-all duration-300 ease-in-out
                    ${a?"lg:w-[150px] md:w-[100px]  ":"w-0 lg:w-[87px]"}
                    overflow-hidden
                `,children:e.jsx("ul",{className:"pt-5",children:r.map((t,i)=>{const c=t.path===s.pathname;if(!(!n&&t.type=="private"))return e.jsxs(x,{to:t.upcoming?"":t.path,className:`
                  ${t.upcoming?"cursor-not-allowed":""}
          flex flex-col relative items-center gap-1
          ${a?"justify-start":"lg:justify-center"}
          py-3
           dark:text-white text-black hover:bg-gray-500 hover:text-gray-100
          transition-all mx-2 duration-300 ease-in-out
          ${a?"":"hidden lg:flex"}
          ${c?"bg-secondary dark:bg-support ":""}
        `,children:[e.jsx("span",{className:"text-end",children:t.icon}),t.upcoming&&e.jsx("span",{className:"text-[7px] text-white bg-red-600 p-1 absolute rotate-45 rounded-lg top-0 right-0",children:"New"}),e.jsx("span",{className:"text-xs text-nowrap text-start",children:t.label})]},i)})})})})}),we=({children:a})=>{const[o,n]=l.useState(!1),r=b(),{user:s}=u(c=>c.auth),t=()=>n(!o);l.useEffect(()=>{n(!1)},[r]);const i=async()=>await customSignOut();return r.pathname.includes("/blog"),e.jsxs(e.Fragment,{children:[e.jsx(te,{user:s,handleLogout:i,menuOpen:o,setMenuOpen:n}),e.jsxs(e.Fragment,{children:[e.jsx(se,{setShowMenu:n,user:s,showMenu:o,toggleMenu:t}),e.jsx(l.Suspense,{fallback:e.jsx("div",{className:"flex fixed top-0 justify-center items-center h-screen w-screen",children:e.jsx(V,{})}),children:e.jsx("main",{className:`
           pl-5 lg:pl-[110px]
           pr-5 py-5  bg-[#f0f0f0] min-h-[calc(100vh-59px)] text-gray-800 transition-all`,children:a||e.jsx(A,{})})})]})]})};export{we as default};
