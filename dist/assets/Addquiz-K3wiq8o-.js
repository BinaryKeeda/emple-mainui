import{a as M,q as A,c as w,r as h,j as e,d as E,B as I}from"./index-5IQCZWui.js";import{D as N,a as Q}from"./DialogContent-B2uNAl_5.js";import{T as m}from"./TextField-BS5c8OM6.js";import{b as v,a as j,S as g}from"./Select-DfQ_w7p6.js";import{M as r}from"./MenuItem-B-7aeyCt.js";import{B as y}from"./Button-BtkhN6tk.js";import{A as B}from"./Add-QXYKSUig.js";import"./Paper-Cl3TElX4.js";import"./Menu-COdTP9bR.js";import"./index-1AjZU1gY.js";import"./Grow-DcTh7rud.js";import"./mergeSlotProps-Bdsshikm.js";import"./index-DCfX2AyQ.js";import"./extendSxProp-N3quz4pF.js";import"./dividerClasses-BuhX_QyX.js";function X({setModalClose:u}){const b=M(s=>s.auth.user),z=A(),{enqueueSnackbar:n}=w(),[C,o]=h.useState(!1),[a,q]=h.useState({title:"",creator:b._id,duration:"",questions:[],marks:"",category:"",difficulty:""}),t=s=>{const{name:i,value:l}=s.target;q({...a,[i]:i==="marks"||i==="duration"?parseInt(l)||0:l})},k=async s=>{var p,x;s.preventDefault(),o(!0);const{title:i,marks:l,duration:f,category:D,difficulty:S}=a;if(!i||!l||!f||!D||!S){n("Please fill in all required fields.",{variant:"warning"}),o(!1);return}if(l<=0||f<=0){n("Marks and duration must be greater than 0.",{variant:"error"}),o(!1);return}try{const c=(await E.post(`${I}/api/admin/quiz/add/`,a,{withCredentials:!0})).data.quiz._id;u(!1),n("Quiz added successfully ðŸŽ‰",{variant:"success"}),z("/admin/edit/quiz/"+c)}catch(d){console.error(d);const c=((x=(p=d.response)==null?void 0:p.data)==null?void 0:x.message)||"Failed to add quiz. Please try again.";n(c,{variant:"error"}),o(!1)}};return e.jsx(N,{open:!0,onClose:()=>u(!1),maxWidth:"sm",fullWidth:!0,children:e.jsx(Q,{dividers:!0,className:"relative bg-white rounded-md p-5 shadow-md max-h-[90vh] overflow-y-auto",children:e.jsxs("form",{onSubmit:k,className:"px-2 sm:px-5 pb-10 pt-8",children:[e.jsxs("div",{className:"mb-5 flex flex-col gap-3",children:[e.jsx(m,{size:"small",required:!0,autoComplete:"off",name:"title",value:a.title,onChange:t,label:"Quiz Title"}),e.jsx(m,{size:"small",required:!0,autoComplete:"off",type:"number",name:"marks",value:a.marks,onChange:t,label:"Quiz Marks"}),e.jsx(m,{size:"small",required:!0,autoComplete:"off",type:"number",name:"duration",value:a.duration,onChange:t,label:"Quiz Duration (minutes)"}),e.jsxs(v,{size:"small",required:!0,children:[e.jsx(j,{children:"Category"}),e.jsxs(g,{name:"category",value:a.category,onChange:t,label:"Category",children:[e.jsx(r,{value:"Aptitude",children:"Aptitude"}),e.jsx(r,{value:"Core",children:"Core"}),e.jsx(r,{value:"Miscellaneous",children:"Miscellaneous"}),e.jsx(r,{value:"Gate",children:"Gate"}),e.jsx(r,{value:"Map",children:"Map"})]})]}),e.jsxs(v,{size:"small",required:!0,children:[e.jsx(j,{children:"Difficulty"}),e.jsxs(g,{name:"difficulty",value:a.difficulty,onChange:t,label:"Difficulty",children:[e.jsx(r,{value:"Easy",children:"Easy"}),e.jsx(r,{value:"Medium",children:"Medium"}),e.jsx(r,{value:"Hard",children:"Hard"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(y,{type:"submit",disabled:C,variant:"contained",color:"primary",endIcon:e.jsx(B,{}),sx:{color:"#f1f1f1",fontWeight:"bold"},children:"Add Quiz"}),e.jsx(y,{variant:"outlined",onClick:()=>u(!1),children:"Cancel"})]})]})})})}export{X as default};
