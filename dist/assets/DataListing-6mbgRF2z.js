import{d as c,B as x,j as e,b as h,a as p,r as m,L as g}from"./index-BM5g2PjF.js";import{u as b}from"./useQuery-DmWq008B.js";import{B as y}from"./Box-DiO_oANZ.js";import{T as o}from"./TextField-Cyg_nLUZ.js";import{M as n}from"./MenuItem-BLp2167C.js";import{T as f}from"./Tooltip-Cjb63dG4.js";import{V as j}from"./Visibility-DMytufH7.js";const v=async({queryKey:t})=>{const[a,{endpoint:s,params:i}]=t;return(await c.get(`${x}/api/data/user/${s}`,{params:i,withCredentials:!0})).data},w=({filters:t,setFilters:a,type:s})=>{const i=r=>{a({...t,[r.target.name]:r.target.value,page:1})};return e.jsxs(y,{display:"flex",flexWrap:"wrap",gap:2,mb:2,children:[e.jsx(o,{name:"search",value:t.search,onChange:i,label:`Search ${s} by title`,variant:"outlined",size:"small",sx:{width:200}}),(s==="solutions/quiz"||s==="problems")&&e.jsxs(o,{name:"difficulty",onChange:i,value:t.difficulty,label:"Difficulty",variant:"outlined",size:"small",sx:{width:150},select:!0,children:[e.jsx(n,{value:"",children:"All Difficulty"}),e.jsx(n,{value:"Easy",children:"Easy"}),e.jsx(n,{value:"Medium",children:"Medium"}),e.jsx(n,{value:"Hard",children:"Hard"})]}),e.jsxs(o,{name:"category",onChange:i,value:t.category,label:"Category",variant:"outlined",size:"small",sx:{width:150},select:!0,children:[e.jsx(n,{value:"",children:"All Categories"}),e.jsx(n,{value:"Aptitude",children:"Aptitude"}),e.jsx(n,{value:"Core",children:"Core"}),e.jsx(n,{value:"Miscellaneous",children:"Miscellaneous"})]})]})},N=(t,a)=>{switch(t){case"quiz":return`/user/preview/${a.slug||a._id}`;case"problem":case"problems":return`/user/problem/${a.slug||a._id}`;case"test":return`/user/test/preview/${a.slug||a._id}`;case"solutions/quiz":return`/user/preview/${a==null?void 0:a._id}`;case"solutions/test":return`/user/test/preview/${a==null?void 0:a._id}`;default:return"#"}},k=(t,a)=>a.split(".").reduce((s,i)=>s==null?void 0:s[i],t),C=({data:t,type:a="item"})=>{var i;if(!((i=t==null?void 0:t.data)!=null&&i.length))return e.jsxs("div",{className:"text-center",children:["No ",a,"s found."]});const s=[{label:"Title",key:"title"}];return a==="test"?s.push({label:"Category",key:"category"}):a==="problem"||a==="problems"?s.push({label:"Difficulty",key:"difficulty"}):a==="solutions/quiz"?(s[0].key="quiz.title",s.push({label:"Score",key:"score"}),s.push({label:"Difficulty",key:"quiz.difficulty"}),s.push({label:"Yuor Rank",key:"rank"}),s.push({label:"Total Attempts",key:"totalParticipants"})):a=="solutions/test"&&(s[0].key="testId.name"),s.push({label:"Attempt",key:"attempt",render:r=>{var l;return e.jsx(h,{className:"underline text-blue-600 hover:text-blue-800",to:N(a,r),state:{name:r.title||((l=r.quizId)==null?void 0:l.title),description:r.description},children:e.jsx(f,{title:"Visibility",children:e.jsx(j,{})})})}}),e.jsx("div",{className:"overflow-x-auto bg-white rounded-lg shadow",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:s.map(r=>e.jsx("th",{className:"px-6 py-3 text-left font-semibold text-sm text-gray-700",children:r.label},r.label))})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:t.data.map(r=>e.jsx("tr",{className:"hover:bg-gray-50",children:s.map(l=>e.jsx("td",{className:"px-6 py-4 text-sm text-gray-800",children:l.render?l.render(r):k(r,l.key)},l.label))},r._id))})]})})},D=({type:t})=>{const{_id:a}=p(u=>u.auth.user),[s,i]=m.useState({userId:a,search:"",category:"",difficulty:"",isAvailable:"",page:1,limit:10,sortBy:"createdAt",sortOrder:"desc"}),r=[t,{endpoint:`${t}`,params:s}],{data:l,isLoading:d}=b({queryKey:r,queryFn:v,staleTime:3e5,cacheTime:36e5});return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx("div",{className:"p-4 mx-auto",children:e.jsx(w,{filters:s,setFilters:i,type:t})}),d?e.jsx(g,{}):e.jsxs("div",{className:"px-4 pb-4 mx-auto",children:[e.jsx(C,{data:l,type:t}),e.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[e.jsx("button",{disabled:s.page<=1,onClick:()=>i({...s,page:s.page-1}),className:"px-5 py-2 rounded bg-gray-100 hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:"← Prev"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",l==null?void 0:l.page," of ",l==null?void 0:l.totalPages]}),e.jsx("button",{disabled:s.page>=(l==null?void 0:l.totalPages),onClick:()=>i({...s,page:s.page+1}),className:"px-5 py-2 rounded bg-gray-100 hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:"Next →"})]})]})]})};export{D};
