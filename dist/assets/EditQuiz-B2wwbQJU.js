const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AddQuestionJson-CVw5LmkP.js","assets/index-BWpwM6wm.js","assets/index-m8C3nMwW.css","assets/index-QYYufuug.js","assets/Button-8B6bbq3_.js","assets/AddQuestionExcel-DLjdZNea.js","assets/xlsx-CygJKsBP.js"])))=>i.map(i=>d[i]);
import{a as A,r as t,i as q,j as e,D as Q,I as E,d as h,B as f,ak as z}from"./index-BWpwM6wm.js";import{c as D,C as I,U as B,A as O,a as R}from"./AddQuestion-DoeY9Ihr.js";import{y as u}from"./index-BEuZCB4N.js";import{B as j}from"./Button-8B6bbq3_.js";import{A as T,a as $,b as F}from"./AccordionSummary-BVG7C8hH.js";import{D as U}from"./Delete-DVV6Yh0N.js";import{T as L}from"./TextField-1nLKWR9i.js";import"./MenuItem-U6-MjfEt.js";import"./Menu-D8sOvZ5z.js";import"./index-B_oAbyRW.js";import"./useSlotProps-CrdNZ0pA.js";import"./Paper-YHM09k75.js";import"./Grow-CmxV9Tds.js";import"./mergeSlotProps-Bx8pxdqr.js";import"./dividerClasses-BT8lHR0o.js";import"./Select-quySsUFL.js";import"./index-BzkhLvT9.js";import"./extendSxProp-BQ-ysKec.js";const P=t.lazy(()=>z(()=>import("./AddQuestionJson-CVw5LmkP.js"),__vite__mapDeps([0,1,2,3,4]))),H=t.lazy(()=>z(()=>import("./AddQuestionExcel-DLjdZNea.js"),__vite__mapDeps([5,1,2,3,6,4])));function ue(){const{data:r}=A(s=>s.quiz),[m,d]=t.useState(!0),[i,x]=t.useState(!1),[o,v]=t.useState(!1),[a,c]=t.useState(null),{id:n}=q(),[y,g]=t.useState(!1),[b,N]=t.useState(0),[w,M]=t.useState(0),[S,p]=t.useState(!1);t.useEffect(()=>{(async()=>{try{const l=await h.get(`${f}/api/admin/quiz/${n}`,{withCredentials:!0});l.data&&c(l.data)}catch(l){console.error(l),u.error("Failed to load quiz")}})()},[n,S]),t.useEffect(()=>{a&&(M(a==null?void 0:a.marks),N(D(a.questions||[])))},[a]);const _=async s=>{try{await h.get(`${f}/api/v1/quiz/question/del/?quizId=${a._id}&questionId=${s}`),u.success("Question deleted"),p(l=>!l)}catch(l){console.error(l),u.error("Failed to delete question")}};return a?e.jsxs("section",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex shadow-sm rounded-md bg-white p-5 justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("i",{className:"text-sm",children:a.isAvailable?"Available":"Currently Not Available"}),e.jsxs("i",{children:["Current Marks : ",b," / ",w]})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs(j,{onClick:()=>d(!1),variant:"outlined",children:["Upload Excel ",e.jsx(I,{sx:{marginLeft:"10px"}})]}),e.jsxs(j,{onClick:()=>x(!0),variant:"contained",children:["Upload JSON ",e.jsx(B,{sx:{marginLeft:"10px"}})]})]})]}),e.jsx(J,{data:a,onRefresh:()=>p(s=>!s)}),e.jsx(O,{quizId:n,maxMarks:w,currentMarks:b,setCurrentMarks:N,onRefresh:()=>p(s=>!s)}),e.jsx("section",{className:"p-5 bg-white flex-col flex gap-1",children:a.questions.length>0?a.questions.map((s,l)=>e.jsxs(T,{children:[e.jsx($,{expandIcon:e.jsx(R,{}),sx:{display:"flex",flexDirection:"row-reverse",alignItems:"center"},children:e.jsxs("div",{className:"flex w-full justify-between",children:[e.jsxs("h1",{className:"flex gap-1 text-sm",children:["Question ",l+1,": ",e.jsx("span",{className:"ml-2",children:s.question})]}),e.jsxs("div",{className:"flex relative w-24 justify-end gap-5",children:[e.jsx(E,{onClick:()=>_(s._id),children:e.jsx(U,{className:"absolute left-0 z-40",sx:{color:"gray"}})}),e.jsx("small",{children:e.jsxs("i",{children:[s.marks," Marks"]})})]})]})}),e.jsx(F,{children:e.jsxs("div",{className:"flex flex-col text-sm px-5",children:[e.jsxs("p",{children:["Type: ",s.category]}),s.image&&e.jsx("img",{className:"my-2 h-[100px] object-contain",src:s.image,alt:"Question"}),s.category==="Text"&&e.jsx(L,{disabled:!0,label:"Answer",value:s.answer,variant:"standard"}),s.category==="MCQ"||s.category=="MSQ"&&s.options.map((C,k)=>e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("p",{children:["Option ",k+1,": ",C.text]}),e.jsx("input",{type:"radio",checked:C.isCorrect,readOnly:!0})," Is Correct"]},k))]})})]},l)):e.jsx("small",{children:"No Questions to display"})}),!m&&e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"loader"}),children:e.jsx(H,{id:n,setModalClose:d})}),i&&e.jsx(P,{setModalClose:()=>x(!1),id:n})]}):e.jsx("div",{className:"h-screen w-screen fixed justify-center flex items-center bg-opacity-20 bg-black left-0 top-0 z-[2999] ",children:e.jsx(Q,{size:"27px"})})}const J=({data:r,onRefresh:m})=>{const{user:d}=A(a=>a.auth),[i,x]=t.useState({title:r.title,creator:d._id,duration:r.duration,questions:r.questions,marks:r.marks,category:r.category,difficulty:r.difficulty,isAvailable:r.isAvailable}),o=a=>{const{name:c,value:n,type:y,checked:g}=a.target;x({...i,[c]:y==="checkbox"?g:c==="marks"||c==="duration"?parseInt(n):n})},v=async a=>{a.preventDefault();try{await h.post(`${f}/api/admin/quiz/edit/${r._id}`,i,{withCredentials:!0}),u.success("Quiz updated successfully"),m()}catch(c){console.error(c),u.error("Failed to update quiz")}};return e.jsxs("section",{className:"p-5 bg-white",children:[e.jsx("h1",{className:"text-lg font-semibold",children:"Edit Quiz"}),e.jsxs("form",{onSubmit:v,className:"grid gap-5 grid-cols-1 sm:grid-cols-3",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"text-xs ml-1 font-semibold",children:"Creator"}),e.jsx("input",{readOnly:!0,type:"text",value:d._id,className:"inputBox"})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"text-xs ml-1 font-semibold",children:"Title"}),e.jsx("input",{type:"text",value:i.title,onChange:o,name:"title",className:"inputBox"})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"text-xs ml-1 font-semibold",children:"Marks"}),e.jsx("input",{type:"number",min:0,value:i.marks,onChange:o,name:"marks",className:"inputBox"})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"text-xs ml-1 font-semibold",children:"Duration"}),e.jsx("input",{type:"number",min:0,value:i.duration,onChange:o,name:"duration",className:"inputBox"})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"text-xs ml-1 font-semibold",children:"Category"}),e.jsxs("select",{name:"category",value:i.category,onChange:o,className:"inputBox",children:[e.jsx("option",{value:"Aptitude",children:"Aptitude"}),e.jsx("option",{value:"Core",children:"Core"}),e.jsx("option",{value:"Miscellaneous",children:"Miscellaneous"})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"text-xs ml-1 font-semibold",children:"Difficulty"}),e.jsxs("select",{name:"difficulty",value:i.difficulty,onChange:o,className:"inputBox",children:[e.jsx("option",{value:"Easy",children:"Easy"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"Hard",children:"Hard"})]})]}),e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsx("label",{className:"text-xs font-semibold",children:"Is Available"}),e.jsx("input",{type:"checkbox",checked:i.isAvailable,onChange:o,name:"isAvailable"})]}),e.jsx("div",{className:"col-span-full",children:e.jsx(j,{type:"submit",variant:"contained",color:"primary",children:"Update Quiz"})})]})]})};export{J as QuizEdit,ue as default};
