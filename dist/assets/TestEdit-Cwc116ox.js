const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AddSectionModal-DTV8fqBT.js","assets/index-Dgxf8jnM.js","assets/index-WrRTqBRO.css"])))=>i.map(i=>d[i]);
import{ai as J,ah as Y,e as U,j as e,r as m,aj as ee,b5 as T,a5 as L,a7 as he,I as te,b2 as O,ak as se,al as ne,bz as ie,by as le,b3 as X,bc as Le,bd as Oe,ba as Z,bl as K,b9 as Ie,ce,cf as ze,a3 as $e,b as z,B as $,a0 as Fe,C as Be,i as De,R as He,ab as qe}from"./index-Dgxf8jnM.js";import{P as oe}from"./Paper-lVDyPjmC.js";import{T as _e}from"./Typography-CVArGf37.js";import{T as W}from"./TextField-DryysFKQ.js";import{R as We}from"./Radio-DNv5_SgU.js";import{T as ve}from"./Tooltip-B3qAYnY_.js";import{B as F}from"./Button-CGcYMRrR.js";import{A as ae}from"./Add-BEI6VEZ0.js";import{d as Ue}from"./index-DbXICBaf.js";import{S as Qe}from"./Select-BIrZgrZ7.js";import{M as de}from"./MenuItem-Zy46vF7i.js";import{G as Ve}from"./Grow-Bpnmt4GB.js";import{C as Ge}from"./Close-D46MnL9q.js";import{A as ue,a as pe,b as me}from"./AccordionSummary-B903_q8-.js";import"./index-C6iZhDE_.js";import"./extendSxProp-DfyTISa-.js";import"./SwitchBase-XkxpVh_4.js";import"./index-DdPFbzDz.js";import"./Popper-B1buMYpQ.js";import"./Menu-DlfYpJNn.js";import"./mergeSlotProps-B3zE2hsj.js";import"./dividerClasses-BK2cx7nh.js";function Xe(t){return Y("MuiAlert",t)}const xe=J("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),Ke=U(e.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),Ze=U(e.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),Je=U(e.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),Ye=U(e.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),et=t=>{const{variant:n,color:r,severity:s,classes:g}=t,x={root:["root",`color${O(r||s)}`,`${n}${O(r||s)}`,`${n}`],icon:["icon"],message:["message"],action:["action"]};return se(x,Xe,g)},tt=L(oe,{name:"MuiAlert",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:r}=t;return[n.root,n[r.variant],n[`${r.variant}${O(r.color||r.severity)}`]]}})(ne(({theme:t})=>{const n=t.palette.mode==="light"?ie:le,r=t.palette.mode==="light"?le:ie;return{...t.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter(X(["light"])).map(([s])=>({props:{colorSeverity:s,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert[`${s}Color`]:n(t.palette[s].light,.6),backgroundColor:t.vars?t.vars.palette.Alert[`${s}StandardBg`]:r(t.palette[s].light,.9),[`& .${xe.icon}`]:t.vars?{color:t.vars.palette.Alert[`${s}IconColor`]}:{color:t.palette[s].main}}})),...Object.entries(t.palette).filter(X(["light"])).map(([s])=>({props:{colorSeverity:s,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert[`${s}Color`]:n(t.palette[s].light,.6),border:`1px solid ${(t.vars||t).palette[s].light}`,[`& .${xe.icon}`]:t.vars?{color:t.vars.palette.Alert[`${s}IconColor`]}:{color:t.palette[s].main}}})),...Object.entries(t.palette).filter(X(["dark"])).map(([s])=>({props:{colorSeverity:s,variant:"filled"},style:{fontWeight:t.typography.fontWeightMedium,...t.vars?{color:t.vars.palette.Alert[`${s}FilledColor`],backgroundColor:t.vars.palette.Alert[`${s}FilledBg`]}:{backgroundColor:t.palette.mode==="dark"?t.palette[s].dark:t.palette[s].main,color:t.palette.getContrastText(t.palette[s].main)}}}))]}})),st=L("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(t,n)=>n.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),nt=L("div",{name:"MuiAlert",slot:"Message",overridesResolver:(t,n)=>n.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),ot=L("div",{name:"MuiAlert",slot:"Action",overridesResolver:(t,n)=>n.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),fe={success:e.jsx(Ke,{fontSize:"inherit"}),warning:e.jsx(Ze,{fontSize:"inherit"}),error:e.jsx(Je,{fontSize:"inherit"}),info:e.jsx(Ye,{fontSize:"inherit"})},be=m.forwardRef(function(n,r){const s=ee({props:n,name:"MuiAlert"}),{action:g,children:x,className:f,closeText:h="Close",color:u,components:p={},componentsProps:c={},icon:d,iconMapping:C=fe,onClose:k,role:l="alert",severity:j="success",slotProps:w={},slots:v={},variant:y="standard",...o}=s,S={...s,color:u,severity:j,variant:y,colorSeverity:u||j},a=et(S),i={slots:{closeButton:p.CloseButton,closeIcon:p.CloseIcon,...v},slotProps:{...c,...w}},[b,P]=T("root",{ref:r,shouldForwardComponentProp:!0,className:he(a.root,f),elementType:tt,externalForwardedProps:{...i,...o},ownerState:S,additionalProps:{role:l,elevation:0}}),[N,I]=T("icon",{className:a.icon,elementType:st,externalForwardedProps:i,ownerState:S}),[B,D]=T("message",{className:a.message,elementType:nt,externalForwardedProps:i,ownerState:S}),[H,q]=T("action",{className:a.action,elementType:ot,externalForwardedProps:i,ownerState:S}),[R,Q]=T("closeButton",{elementType:te,externalForwardedProps:i,ownerState:S}),[V,G]=T("closeIcon",{elementType:Ge,externalForwardedProps:i,ownerState:S});return e.jsxs(b,{...P,children:[d!==!1?e.jsx(N,{...I,children:d||C[j]||fe[j]}):null,e.jsx(B,{...D,children:x}),g!=null?e.jsx(H,{...q,children:g}):null,g==null&&k?e.jsx(H,{...q,children:e.jsx(R,{size:"small","aria-label":h,title:h,color:"inherit",onClick:k,...Q,children:e.jsx(V,{fontSize:"small",...G})})}):null]})});function ge(t){return t.substring(2).toLowerCase()}function at(t,n){return n.documentElement.clientWidth<t.clientX||n.documentElement.clientHeight<t.clientY}function rt(t){const{children:n,disableReactTree:r=!1,mouseEvent:s="onClick",onClickAway:g,touchEvent:x="onTouchEnd"}=t,f=m.useRef(!1),h=m.useRef(null),u=m.useRef(!1),p=m.useRef(!1);m.useEffect(()=>(setTimeout(()=>{u.current=!0},0),()=>{u.current=!1}),[]);const c=Le(Oe(n),h),d=Z(l=>{const j=p.current;p.current=!1;const w=K(h.current);if(!u.current||!h.current||"clientX"in l&&at(l,w))return;if(f.current){f.current=!1;return}let v;l.composedPath?v=l.composedPath().includes(h.current):v=!w.documentElement.contains(l.target)||h.current.contains(l.target),!v&&(r||!j)&&g(l)}),C=l=>j=>{p.current=!0;const w=n.props[l];w&&w(j)},k={ref:c};return x!==!1&&(k[x]=C(x)),m.useEffect(()=>{if(x!==!1){const l=ge(x),j=K(h.current),w=()=>{f.current=!0};return j.addEventListener(l,d),j.addEventListener("touchmove",w),()=>{j.removeEventListener(l,d),j.removeEventListener("touchmove",w)}}},[d,x]),s!==!1&&(k[s]=C(s)),m.useEffect(()=>{if(s!==!1){const l=ge(s),j=K(h.current);return j.addEventListener(l,d),()=>{j.removeEventListener(l,d)}}},[d,s]),m.cloneElement(n,k)}function it(t={}){const{autoHideDuration:n=null,disableWindowBlurListener:r=!1,onClose:s,open:g,resumeHideDuration:x}=t,f=Ie();m.useEffect(()=>{if(!g)return;function v(y){y.defaultPrevented||y.key==="Escape"&&(s==null||s(y,"escapeKeyDown"))}return document.addEventListener("keydown",v),()=>{document.removeEventListener("keydown",v)}},[g,s]);const h=Z((v,y)=>{s==null||s(v,y)}),u=Z(v=>{!s||v==null||f.start(v,()=>{h(null,"timeout")})});m.useEffect(()=>(g&&u(n),f.clear),[g,n,u,f]);const p=v=>{s==null||s(v,"clickaway")},c=f.clear,d=m.useCallback(()=>{n!=null&&u(x??n*.5)},[n,x,u]),C=v=>y=>{const o=v.onBlur;o==null||o(y),d()},k=v=>y=>{const o=v.onFocus;o==null||o(y),c()},l=v=>y=>{const o=v.onMouseEnter;o==null||o(y),c()},j=v=>y=>{const o=v.onMouseLeave;o==null||o(y),d()};return m.useEffect(()=>{if(!r&&g)return window.addEventListener("focus",d),window.addEventListener("blur",c),()=>{window.removeEventListener("focus",d),window.removeEventListener("blur",c)}},[r,g,d,c]),{getRootProps:(v={})=>{const y={...ce(t),...ce(v)};return{role:"presentation",...v,...y,onBlur:C(y),onFocus:k(y),onMouseEnter:l(y),onMouseLeave:j(y)}},onClickAway:p}}function lt(t){return Y("MuiSnackbarContent",t)}J("MuiSnackbarContent",["root","message","action"]);const ct=t=>{const{classes:n}=t;return se({root:["root"],action:["action"],message:["message"]},lt,n)},dt=L(oe,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(t,n)=>n.root})(ne(({theme:t})=>{const n=t.palette.mode==="light"?.8:.98,r=ze(t.palette.background.default,n);return{...t.typography.body2,color:t.vars?t.vars.palette.SnackbarContent.color:t.palette.getContrastText(r),backgroundColor:t.vars?t.vars.palette.SnackbarContent.bg:r,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,flexGrow:1,[t.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}}})),ut=L("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(t,n)=>n.message})({padding:"8px 0"}),pt=L("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(t,n)=>n.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),mt=m.forwardRef(function(n,r){const s=ee({props:n,name:"MuiSnackbarContent"}),{action:g,className:x,message:f,role:h="alert",...u}=s,p=s,c=ct(p);return e.jsxs(dt,{role:h,square:!0,elevation:6,className:he(c.root,x),ownerState:p,ref:r,...u,children:[e.jsx(ut,{className:c.message,ownerState:p,children:f}),g?e.jsx(pt,{className:c.action,ownerState:p,children:g}):null]})});function xt(t){return Y("MuiSnackbar",t)}J("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const ft=t=>{const{classes:n,anchorOrigin:r}=t,s={root:["root",`anchorOrigin${O(r.vertical)}${O(r.horizontal)}`]};return se(s,xt,n)},gt=L("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:r}=t;return[n.root,n[`anchorOrigin${O(r.anchorOrigin.vertical)}${O(r.anchorOrigin.horizontal)}`]]}})(ne(({theme:t})=>({zIndex:(t.vars||t).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center",variants:[{props:({ownerState:n})=>n.anchorOrigin.vertical==="top",style:{top:8,[t.breakpoints.up("sm")]:{top:24}}},{props:({ownerState:n})=>n.anchorOrigin.vertical!=="top",style:{bottom:8,[t.breakpoints.up("sm")]:{bottom:24}}},{props:({ownerState:n})=>n.anchorOrigin.horizontal==="left",style:{justifyContent:"flex-start",[t.breakpoints.up("sm")]:{left:24,right:"auto"}}},{props:({ownerState:n})=>n.anchorOrigin.horizontal==="right",style:{justifyContent:"flex-end",[t.breakpoints.up("sm")]:{right:24,left:"auto"}}},{props:({ownerState:n})=>n.anchorOrigin.horizontal==="center",style:{[t.breakpoints.up("sm")]:{left:"50%",right:"auto",transform:"translateX(-50%)"}}}]}))),je=m.forwardRef(function(n,r){const s=ee({props:n,name:"MuiSnackbar"}),g=$e(),x={enter:g.transitions.duration.enteringScreen,exit:g.transitions.duration.leavingScreen},{action:f,anchorOrigin:{vertical:h,horizontal:u}={vertical:"bottom",horizontal:"left"},autoHideDuration:p=null,children:c,className:d,ClickAwayListenerProps:C,ContentProps:k,disableWindowBlurListener:l=!1,message:j,onBlur:w,onClose:v,onFocus:y,onMouseEnter:o,onMouseLeave:S,open:a,resumeHideDuration:i,slots:b={},slotProps:P={},TransitionComponent:N,transitionDuration:I=x,TransitionProps:{onEnter:B,onExited:D,...H}={},...q}=s,R={...s,anchorOrigin:{vertical:h,horizontal:u},autoHideDuration:p,disableWindowBlurListener:l,TransitionComponent:N,transitionDuration:I},Q=ft(R),{getRootProps:V,onClickAway:G}=it({...R}),[ye,re]=m.useState(!0),Ce=A=>{re(!0),D&&D(A)},we=(A,E)=>{re(!1),B&&B(A,E)},_={slots:{transition:N,...b},slotProps:{content:k,clickAwayListener:C,transition:H,...P}},[Se,ke]=T("root",{ref:r,className:[Q.root,d],elementType:gt,getSlotProps:V,externalForwardedProps:{..._,...q},ownerState:R}),[Ne,{ownerState:Ae,...Pe}]=T("clickAwayListener",{elementType:rt,externalForwardedProps:_,getSlotProps:A=>({onClickAway:(...E)=>{var M;(M=A.onClickAway)==null||M.call(A,...E),G(...E)}}),ownerState:R}),[Ee,Te]=T("content",{elementType:mt,shouldForwardComponentProp:!0,externalForwardedProps:_,additionalProps:{message:j,action:f},ownerState:R}),[Re,Me]=T("transition",{elementType:Ve,externalForwardedProps:_,getSlotProps:A=>({onEnter:(...E)=>{var M;(M=A.onEnter)==null||M.call(A,...E),we(...E)},onExited:(...E)=>{var M;(M=A.onExited)==null||M.call(A,...E),Ce(...E)}}),additionalProps:{appear:!0,in:a,timeout:I,direction:h==="top"?"down":"up"},ownerState:R});return!a&&ye?null:e.jsx(Ne,{...Pe,...b.clickAwayListener&&{ownerState:Ae},children:e.jsx(Se,{...ke,children:e.jsx(Re,{...Me,children:c||e.jsx(Ee,{...Te})})})})});function ht({setCurrTest:t,setCurrSection:n,setSnackbar:r,sectionId:s,testId:g}){const[x,f]=m.useState({question:"",marks:0,negative:0,answerOptions:[{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1}]}),h=async u=>{u.preventDefault();try{const p=await z.post(`${$}/api/v2/test/${g}/section/${s}/add-question`,x,{withCredentials:!0});n(c=>({...c,questionSet:[...(c==null?void 0:c.questionSet)||[],x]})),r({open:!0,message:"Question added!",severity:"success"}),f({question:"",marks:0,negative:0,answerOptions:[{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1}]})}catch(p){console.error(p),r({open:!0,message:"Failed to add question",severity:"error"})}};return e.jsxs(oe,{elevation:1,className:"p-4 space-y-4",children:[e.jsx(_e,{variant:"subtitle1",sx:{fontWeight:600},children:"Add Question"}),e.jsxs("form",{onSubmit:h,className:"space-y-3",children:[e.jsx(W,{fullWidth:!0,label:"Question",size:"small",variant:"outlined",value:x.question,onChange:u=>f(p=>({...p,question:u.target.value})),required:!0}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:x.answerOptions.map((u,p)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(We,{size:"small",checked:u.isCorrect,onChange:()=>{const c=x.answerOptions.map((d,C)=>({...d,isCorrect:C===p}));f(d=>({...d,answerOptions:c}))}}),e.jsx(W,{label:`Option ${String.fromCharCode(65+p)}`,size:"small",fullWidth:!0,variant:"standard",value:u.text,onChange:c=>{const d=[...x.answerOptions];d[p].text=c.target.value,f(C=>({...C,answerOptions:d}))},required:!0})]},p))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(W,{label:"Marks",type:"number",size:"small",value:x.marks,onChange:u=>f(p=>({...p,marks:parseFloat(u.target.value)})),required:!0}),e.jsx(W,{label:"Negative",type:"number",size:"small",value:x.negative,onChange:u=>f(p=>({...p,negative:parseFloat(u.target.value)})),required:!0})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(ve,{title:"Add question",children:e.jsx(F,{type:"submit",variant:"contained",size:"small",endIcon:e.jsx(ae,{sx:{fontSize:16}}),sx:{fontSize:12,textTransform:"none"},children:"Add"})})})]})]})}const vt=({closeModal:t,setSnackbar:n})=>{const[r,s]=m.useState({title:"",description:"",difficulty:"Easy"}),[g,x]=m.useState([{input:"",output:"",explanation:""}]),[f,h]=m.useState([{input:"",output:""}]),[u,p]=m.useState([]),[c,d]=m.useState("python"),[C,k]=m.useState(""),l=a=>{const{name:i,value:b}=a.target;s(P=>({...P,[i]:b}))},j=(a,i,b,P=!1)=>{if(P){const N=[...g];N[a][i]=b,x(N)}else{const N=[...f];N[a][i]=b,h(N)}},w=(a=!1)=>{const i=a?{input:"",output:"",explanation:""}:{input:"",output:""};a?x([...g,i]):h([...f,i])},v=(a,i=!1)=>{if(i){const b=[...g];b.splice(a,1),x(b)}else{const b=[...f];b.splice(a,1),h(b)}},y=()=>{if(u.some(a=>a.language===c)){alert(`Signature for ${c} already exists`);return}if(!C.trim()){alert("Function signature cannot be empty");return}p([...u,{language:c,signature:C}]),k("")},o=a=>{const i=[...u];i.splice(a,1),p(i)},S=async a=>{var b,P;a.preventDefault();const i={title:r.title.trim(),description:r.description.trim(),difficulty:r.difficulty,sampleTestCases:g,testCases:f,functionSignatures:u};try{const N=await z.post(`${$}/api/v2/test/problem/add`,i,{withCredentials:!0});n({open:!0,message:N.data.message||"Problem added successfully!",severity:"success"}),s({title:"",description:"",difficulty:"Easy"}),x([{input:"",output:"",explanation:""}]),h([{input:"",output:""}]),p([]),t()}catch(N){console.error("Error submitting problem:",N);const I=((P=(b=N.response)==null?void 0:b.data)==null?void 0:P.message)||"Failed to add problem. Please try again later.";n({open:!0,message:I,severity:"error"})}};return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-30",children:e.jsxs("div",{className:"flex flex-col max-w-4xl mx-auto p-6 mt-12 bg-white shadow-lg rounded-lg",children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsx(te,{sx:{bgcolor:"#000",color:"#fff"},onClick:t,children:e.jsx(Be,{})})}),e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Add a New Problem"}),e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Title"}),e.jsx("input",{name:"title",value:r.title,onChange:l,className:"w-full border p-2 rounded",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Description"}),e.jsx("textarea",{name:"description",value:r.description,onChange:l,rows:4,className:"w-full border p-2 rounded",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Difficulty"}),e.jsxs("select",{name:"difficulty",value:r.difficulty,onChange:l,className:"w-full border p-2 rounded",required:!0,children:[e.jsx("option",{value:"Easy",children:"Easy"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"Hard",children:"Hard"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Function Signatures"}),u.map((a,i)=>e.jsxs("div",{className:"mb-4 border p-3 rounded flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Language:"})," ",a.language," ",e.jsx("br",{}),e.jsx("strong",{children:"Signature:"})," ",e.jsx("pre",{className:"whitespace-pre-wrap",children:a.signature})]}),e.jsx("button",{type:"button",onClick:()=>o(i),className:"text-red-500 ml-4",children:"❌ Remove"})]},i)),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("select",{value:c,onChange:a=>d(a.target.value),className:"border p-2 rounded",children:[e.jsx("option",{value:"cpp",children:"C++"}),e.jsx("option",{value:"c",children:"C"}),e.jsx("option",{value:"java",children:"Java"}),e.jsx("option",{value:"python",children:"Python"})]}),e.jsx("div",{children:e.jsx(Ue,{height:"200px",language:c,theme:"vs-light",value:C,onChange:a=>k(a),options:{minimap:{enabled:!1},scrollBeyondLastLine:!1,fontSize:14,padding:"10px"}})})]}),e.jsx("button",{type:"button",onClick:y,className:"bg-green-100 border border-green-500 px-3 py-1 rounded text-sm",children:"➕ Add Function Signature"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Test Cases"}),f.map((a,i)=>e.jsxs("div",{className:"mb-4 border p-3 rounded flex gap-2 flex-wrap",children:[e.jsx("input",{type:"text",placeholder:"Input",value:a.input,onChange:b=>j(i,"input",b.target.value),className:"flex-grow p-2 border rounded",required:!0}),e.jsx("input",{type:"text",placeholder:"Output",value:a.output,onChange:b=>j(i,"output",b.target.value),className:"flex-grow p-2 border rounded",required:!0}),e.jsx("button",{type:"button",onClick:()=>v(i),className:"text-red-500 self-center",children:"❌ Remove"})]},i)),e.jsx("button",{type:"button",onClick:()=>w(),className:"bg-green-100 border border-green-500 px-3 py-1 rounded text-sm",children:"➕ Add Test Case"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Sample Test Cases"}),g.map((a,i)=>e.jsxs("div",{className:"mb-4 border p-3 rounded flex gap-2 flex-wrap",children:[e.jsx("input",{type:"text",placeholder:"Input",value:a.input,onChange:b=>j(i,"input",b.target.value,!0),className:"flex-grow p-2 border rounded",required:!0}),e.jsx("input",{type:"text",placeholder:"Output",value:a.output,onChange:b=>j(i,"output",b.target.value,!0),className:"flex-grow p-2 border rounded",required:!0}),e.jsx("input",{type:"text",placeholder:"Explanation",value:a.explanation,onChange:b=>j(i,"explanation",b.target.value,!0),className:"flex-grow p-2 border rounded"}),e.jsx("button",{type:"button",onClick:()=>v(i,!0),className:"text-red-500 self-center",children:"❌ Remove"})]},i)),e.jsx("button",{type:"button",onClick:()=>w(!0),className:"bg-green-100 border border-green-500 px-3 py-1 rounded text-sm",children:"➕ Add Sample Test Case"})]}),e.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-3 rounded hover:bg-blue-700 transition",children:"Add Problem"})]})]})})};function bt({testId:t,sectionId:n}){const[r,s]=m.useState(!1),[g,x]=m.useState([]),[f,h]=m.useState(""),[u,p]=m.useState(!1),[c,d]=m.useState({open:!1,message:"",severity:"success"}),C=async()=>{p(!0);try{const l=await z.get(`${$}/api/v2/test/problems/get`,{withCredentials:!0});x(l.data)}catch(l){console.error(l),d({open:!0,message:"Failed to fetch problems",severity:"error"})}finally{p(!1)}},k=async()=>{var l,j;if(!f)return d({open:!0,message:"Please select a problem",severity:"warning"});try{const w=await z.post(`${$}/api/v2/test/section/${t}/${n}/add-problem`,{problemId:f},{withCredentials:!0});d({open:!0,message:w.data.message,severity:"success"})}catch(w){console.error(w),d({open:!0,message:((j=(l=w.response)==null?void 0:l.data)==null?void 0:j.message)||"Failed to add problem",severity:"error"})}};return m.useEffect(()=>{C()},[]),e.jsxs(e.Fragment,{children:[r&&e.jsx(vt,{setSnackbar:d,closeModal:()=>{s(!1),C()}}),e.jsxs("section",{className:"flex justify-between items-center",children:[e.jsx(F,{onClick:()=>s(!0),variant:"contained",sx:{fontSize:11},startIcon:e.jsx(ae,{}),children:"Add New Problem"}),e.jsxs("div",{className:"flex gap-4 mt-5 items-center",children:[u?e.jsx(Fe,{size:24}):e.jsxs(Qe,{variant:"standard",value:f,onChange:l=>h(l.target.value),displayEmpty:!0,sx:{minWidth:250},children:[e.jsx(de,{value:"",disabled:!0,children:"Select Problem"}),g.map(l=>e.jsx(de,{value:l._id,children:l.title},l._id))]}),e.jsx(F,{onClick:k,variant:"contained",color:"primary",sx:{fontSize:9},disabled:!f,children:"Add to Section"})]})]}),e.jsx(je,{open:c.open,autoHideDuration:4e3,onClose:()=>d({...c,open:!1}),children:e.jsx(be,{onClose:()=>d({...c,open:!1}),severity:c.severity,variant:"filled",children:c.message})})]})}const jt=He.lazy(()=>qe(()=>import("./AddSectionModal-DTV8fqBT.js"),__vite__mapDeps([0,1,2])));function _t(){var w,v,y;const{id:t}=De(),[n,r]=m.useState(null),[s,g]=m.useState(),[x,f]=m.useState(!1),[h,u]=m.useState({name:"",duration:"",isAvailable:!1}),[p,c]=m.useState(!1),[d,C]=m.useState({open:!1,message:"",severity:"success"}),k=o=>{const{name:S,value:a,type:i,checked:b}=o.target,P=i==="checkbox"?b:a;u(N=>({...N,[S]:P}))},l=()=>{C(o=>({...o,open:!1}))},j=async o=>{var S,a;o.preventDefault(),c(!0);try{const i=await z.post(`${$}/api/v2/test/edit/${t}`,h,{withCredentials:!0});C({open:!0,message:"Test updated successfully!",severity:"success"})}catch(i){const b=((a=(S=i.response)==null?void 0:S.data)==null?void 0:a.message)||"Failed to update test.";C({open:!0,message:b,severity:"error"})}finally{c(!1)}};return m.useEffect(()=>{z.get(`${$}/api/v2/test/${t}`,{withCredentials:!0}).then(o=>{var S;r(o.data),g((S=o.data)==null?void 0:S.sections[0]),u({name:o.data.name||"",duration:parseInt(o.data.duration)||0,isAvailable:o.data.isAvailable||!1})}).catch(o=>console.log(o))},[t]),e.jsxs("div",{className:"b",children:[e.jsxs("main",{className:"flex gap-4",children:[e.jsxs("form",{onSubmit:j,className:"flex-1 border rounded-lg items-center py-3 grid grid-cols-1 space-y-3 shadow-lg font-sans  p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-nowrap",children:"Test id : "}),e.jsx("input",{className:"custominput",type:"text",value:n==null?void 0:n._id,readOnly:!0})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-nowrap",children:"Test name : "}),e.jsx("input",{className:"custominput",type:"text",name:"name",value:h==null?void 0:h.name,onChange:k})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-nowrap",children:"Test duration : "}),e.jsx("input",{className:"custominput",type:"text",name:"duration",onChange:k,value:h.duration})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-nowrap",children:"Test decription : "}),e.jsx("input",{className:"custominput",type:"text",value:n==null?void 0:n.description,readOnly:!0})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-nowrap",children:"Is Available "}),e.jsx("input",{className:"",type:"checkbox",name:"isAvailable",onChange:k,checked:h.isAvailable})]}),e.jsx(F,{type:"submit",sx:{fontSize:11,width:"100px"},variant:"contained",children:"Update"})]}),e.jsxs("section",{className:"flex-[0.7] justify-start border flex-col rounded-lg items-center py-3 flex gap-4 shadow-lg font-sans  p-4",children:[e.jsx("div",{className:"flex flex-col gap-2 w-full p-2 bg-white shadow-md rounded-md",children:(w=n==null?void 0:n.sections)==null?void 0:w.map((o,S)=>e.jsx("div",{className:"w-full",children:e.jsx(F,{fullWidth:!0,onClick:()=>g(o),sx:{justifyContent:"flex-start",fontSize:12,textTransform:"none",backgroundColor:o._id===(s==null?void 0:s._id)?"#333":"#FFA500",color:o._id===(s==null?void 0:s._id)?"#fff":"#000","&:hover":{backgroundColor:o._id===(s==null?void 0:s._id)?"#111":"#e69500"},borderRadius:"8px",padding:"6px 12px"},variant:"contained",children:o.name})},o._id))}),e.jsx(ve,{title:"Add section",children:e.jsx(te,{onClick:()=>{f(!0)},color:"primary",focusRipple:!0,children:e.jsx(ae,{})})})]})]}),e.jsxs("section",{className:"mt-4",children:[s&&(s==null?void 0:s.sectionType)=="Quiz"&&e.jsx(ht,{setCurrSection:g,setCurrTest:r,setSnackbar:C,sectionId:s==null?void 0:s._id,testId:t}),s&&(s==null?void 0:s.sectionType)=="Coding"&&e.jsx(e.Fragment,{children:e.jsx(bt,{testId:t,sectionId:s==null?void 0:s._id})})]}),t&&x&&e.jsx(m.Suspense,{fallback:e.jsx("div",{children:e.jsx("div",{className:"loader"})}),children:e.jsx(jt,{closeModal:()=>{f(!1)},testId:t})}),e.jsxs("section",{className:"mt-4",children:[(v=s==null?void 0:s.questionSet)==null?void 0:v.map((o,S)=>e.jsxs(ue,{children:[e.jsx(pe,{children:e.jsxs("div",{className:"flex gap-3 items-center w-full",children:[e.jsx("p",{className:"text-sm",children:S+1+". "}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"text-xs font-bold ml-1",children:"Question"}),e.jsx("input",{type:"text",className:"custominput",value:o.question,name:"",id:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold ml-1",children:"Marks"}),e.jsx("input",{type:"number",className:"custominput ",value:o.negative,name:"",id:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold ml-1",children:"Negative"}),e.jsx("input",{type:"number",className:"custominput ",value:o.marks,name:"",id:""})]})]})}),e.jsx(me,{children:o.answerOptions.map((a,i)=>e.jsxs("div",{className:"flex mb-1 gap-3 items-center",children:[e.jsxs("p",{className:"text-xs text-nowrap",children:["Option ",i+1]}),e.jsx("input",{style:{width:"300px"},type:"text",className:"custominput w-[100px]",value:a.text,name:"",id:""}),e.jsx("input",{type:"checkbox",checked:a.isCorrect,placeholder:"isCorrect",name:"",id:""})]}))})]})),(y=s==null?void 0:s.problemset)==null?void 0:y.map((o,S)=>e.jsxs(ue,{children:[e.jsx(pe,{children:e.jsxs("div",{className:"flex gap-3 items-center w-full",children:[e.jsx("p",{className:"text-sm",children:S+1+". "}),e.jsx("p",{children:o.title})]})}),e.jsx(me,{children:e.jsx(e.Fragment,{children:e.jsx("p",{children:o.description})})})]}))]}),e.jsx(je,{open:d.open,autoHideDuration:3e3,onClose:l,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(be,{onClose:l,severity:d.severity,sx:{width:"100%"},children:d.message})})]})}export{_t as default};
