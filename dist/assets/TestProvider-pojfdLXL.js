import{j as e,r as t,d as D,B as P}from"./index-DdMezOeP.js";function A(){return e.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500/75 transition-opacity"}),e.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:e.jsx("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-xs",children:e.jsx("div",{className:"bg-white py-7",children:e.jsxs("div",{className:"mt-3 text-center flex items-center justify-center gap-5 sm:mt-0 sm:text-left",children:[e.jsx("h3",{className:"text-base font-medium ",id:"dialog-title",children:"Loading"}),e.jsx("div",{className:"animate-spin rounded-full h-7 w-7 border-t-transparent border-2 border-gray-900"})]})})})})]})}const g=t.createContext(),I=async(c,n)=>await D.post(`${P}/api/exam/solution`,{userId:c,testId:n},{withCredentials:!0}).then(r=>r.data.data).catch(r=>{var s,a;return((a=(s=r.response)==null?void 0:s.data)==null?void 0:a.message)||"Error fetching solution"}),_=({children:c,testId:n,userId:r})=>{const[s,a]=t.useState(null),[l,B]=t.useState(null),[d,p]=t.useState(!0),[j,u]=t.useState(),[S,b]=t.useState(!1),[m,x]=t.useState(-1),[v,w]=t.useState(),[y,f]=t.useState(!1);if(t.useEffect(()=>{(async()=>{const i=await I(r,n);a(i),p(!1),u(i.hasAgreed),x(i.currSection),f(i.isSubmitted)})()},[]),d)return e.jsxs("div",{className:"flex items-center justify-center bg-white h-screen w-screen",children:[" ",e.jsx(A,{})]});if(l)return console.error("Test query error:",l),e.jsx("p",{children:"Error loading test data. Please try again."});const h=s.testSnapshot,o=h[m],N=s.response,E=s.userDetails||[],L=s.columns||[],T=s.isProtected||!1,C={};return e.jsx(g.Provider,{value:{loader:S,hasAgreed:j,sectionId:o==null?void 0:o.sectionId,setUFMSubmit:w,ufmSubmit:v,setLoader:b,setHasAgreed:u,setData:a,isSubmitted:y,setIsSubmitted:f,testId:n,setCurrent:x,data:s,error:l,loading:d,test:h,section:o,response:N,current:m,isProtected:T,helpers:C,userDetails:E,columns:L,submissionId:s._id},children:c})},q=()=>t.useContext(g);export{A as L,_ as T,q as u};
