import{c as A,q as w,d as M,r as h,j as e,b as E,B as I}from"./index-DuMHTSdw.js";import{D as N,a as Q}from"./DialogContent-DoXBGlpj.js";import{T as c}from"./TextField-DS3DH8Ob.js";import{b as v,a as g,S as j}from"./Select-ulCrDANk.js";import{M as r}from"./MenuItem-DnBDY4tK.js";import{B as y}from"./Button-CjMKz1A8.js";import{A as B}from"./Add-BwKqpNd5.js";import"./Paper-tsmsi79X.js";import"./Menu-DhppiPkq.js";import"./index-CRzeOzbS.js";import"./Grow-BjJ8mM2A.js";import"./mergeSlotProps-CFfg8Mmd.js";import"./index-DGHOctzD.js";import"./extendSxProp-d_nzIvff.js";import"./dividerClasses-Uen8-N24.js";function X({setModalClose:u}){const b=A(s=>s.auth.user),z=w(),{enqueueSnackbar:n}=M(),[C,o]=h.useState(!1),[a,q]=h.useState({title:"",creator:b._id,duration:"",questions:[],marks:"",category:"",difficulty:""}),t=s=>{const{name:i,value:l}=s.target;q({...a,[i]:i==="marks"||i==="duration"?parseInt(l)||0:l})},k=async s=>{var p,x;s.preventDefault(),o(!0);const{title:i,marks:l,duration:f,category:D,difficulty:S}=a;if(!i||!l||!f||!D||!S){n("Please fill in all required fields.",{variant:"warning"}),o(!1);return}if(l<=0||f<=0){n("Marks and duration must be greater than 0.",{variant:"error"}),o(!1);return}try{const m=(await E.post(`${I}/api/admin/quiz/add/`,a,{withCredentials:!0})).data.quiz._id;u(!1),n("Quiz added successfully ðŸŽ‰",{variant:"success"}),z("/admin/edit/quiz/"+m)}catch(d){console.error(d);const m=((x=(p=d.response)==null?void 0:p.data)==null?void 0:x.message)||"Failed to add quiz. Please try again.";n(m,{variant:"error"}),o(!1)}};return e.jsx(N,{open:!0,onClose:()=>u(!1),maxWidth:"sm",fullWidth:!0,children:e.jsx(Q,{dividers:!0,className:"relative bg-white rounded-md p-5 shadow-md max-h-[90vh] overflow-y-auto",children:e.jsxs("form",{onSubmit:k,className:"px-2 sm:px-5 pb-10 pt-8",children:[e.jsxs("div",{className:"mb-5 flex flex-col gap-3",children:[e.jsx(c,{size:"small",required:!0,autoComplete:"off",name:"title",value:a.title,onChange:t,label:"Quiz Title"}),e.jsx(c,{size:"small",required:!0,autoComplete:"off",type:"number",name:"marks",value:a.marks,onChange:t,label:"Quiz Marks"}),e.jsx(c,{size:"small",required:!0,autoComplete:"off",type:"number",name:"duration",value:a.duration,onChange:t,label:"Quiz Duration (minutes)"}),e.jsxs(v,{size:"small",required:!0,children:[e.jsx(g,{children:"Category"}),e.jsxs(j,{name:"category",value:a.category,onChange:t,label:"Category",children:[e.jsx(r,{value:"Aptitude",children:"Aptitude"}),e.jsx(r,{value:"Core",children:"Core"}),e.jsx(r,{value:"Miscellaneous",children:"Miscellaneous"})]})]}),e.jsxs(v,{size:"small",required:!0,children:[e.jsx(g,{children:"Difficulty"}),e.jsxs(j,{name:"difficulty",value:a.difficulty,onChange:t,label:"Difficulty",children:[e.jsx(r,{value:"Easy",children:"Easy"}),e.jsx(r,{value:"Medium",children:"Medium"}),e.jsx(r,{value:"Hard",children:"Hard"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(y,{type:"submit",disabled:C,variant:"contained",color:"primary",endIcon:e.jsx(B,{}),sx:{color:"#f1f1f1",fontWeight:"bold"},children:"Add Quiz"}),e.jsx(y,{variant:"outlined",onClick:()=>u(!1),children:"Cancel"})]})]})})})}export{X as default};
