import{d as j,r as d,q as y,j as e,a0 as C,b as D,B as S}from"./index-Dgxf8jnM.js";import{D as w,a as P}from"./DialogContent-pdgPcrJS.js";import{D as T,a as W}from"./DialogTitle-D4Vp6iON.js";import{T as i}from"./TextField-DryysFKQ.js";import{M as s}from"./MenuItem-Zy46vF7i.js";import{B as h}from"./Button-CGcYMRrR.js";import"./Paper-lVDyPjmC.js";import"./Typography-CVArGf37.js";import"./index-C6iZhDE_.js";import"./extendSxProp-DfyTISa-.js";import"./Select-BIrZgrZ7.js";import"./Menu-DlfYpJNn.js";import"./index-DdPFbzDz.js";import"./Grow-Bpnmt4GB.js";import"./mergeSlotProps-B3zE2hsj.js";import"./dividerClasses-BK2cx7nh.js";const N={name:"",description:"",duration:"",visibility:"private",category:"Placements"};function J({setModalClose:o,onTestCreated:x=()=>{}}){const{enqueueSnackbar:u}=j(),[t,f]=d.useState(N),[c,m]=d.useState(!1),[p,q]=d.useState(null),g=y(),r=n=>{const{name:l,value:a}=n.target;f(b=>({...b,[l]:a}))},v=async()=>{var n,l;if(!t.name||!t.duration||!t.visibility||!t.category){u("Please fill all required fields âš ï¸",{variant:"warning"});return}try{m(!0);const a=await D.post(`${S}/api/admin/tests/add`,{...t,duration:Number(t.duration)},{withCredentials:!0});x(a.data.data),o(!1),g("/admin/edit/test/"+a.data.data),u("Test created successfully ðŸŽ‰",{variant:"success"})}catch(a){console.error("Error creating test:",a),u(((l=(n=a.response)==null?void 0:n.data)==null?void 0:l.error)||"Something went wrong âŒ",{variant:"error"})}finally{m(!1)}};return e.jsxs(w,{open:!0,onClose:()=>o(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(T,{children:"Create New Test"}),e.jsxs(P,{dividers:!0,className:"flex flex-col gap-4 pt-4",children:[e.jsx(i,{label:"Test Name",name:"name",value:t.name,onChange:r,fullWidth:!0,required:!0}),e.jsx(i,{label:"Description",name:"description",value:t.description,onChange:r,multiline:!0,rows:3,fullWidth:!0}),e.jsx(i,{label:"Duration (in minutes)",name:"duration",type:"number",value:t.duration,onChange:r,fullWidth:!0,required:!0}),e.jsxs(i,{label:"Visibility",name:"visibility",value:t.visibility,onChange:r,select:!0,fullWidth:!0,children:[e.jsx(s,{value:"private",children:"Private"}),e.jsx(s,{value:"public",children:"Public"}),e.jsx(s,{value:"group",children:"Group"})]}),e.jsxs(i,{label:"Category",name:"category",value:t.category,onChange:r,select:!0,fullWidth:!0,children:[e.jsx(s,{value:"Placements",children:"Placements"}),e.jsx(s,{value:"Gate",children:"Gate"})]}),p&&e.jsx("p",{className:"text-red-600 text-sm",children:p})]}),e.jsxs(W,{children:[e.jsx(h,{onClick:()=>o(!1),disabled:c,children:"Cancel"}),e.jsx(h,{onClick:v,variant:"contained",disabled:c,children:c?e.jsx(C,{size:20}):"Create"})]})]})}export{J as default};
