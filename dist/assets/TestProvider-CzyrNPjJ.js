import{j as e,r as t,d as L,B as T}from"./index-B7On-SPP.js";function C(){return e.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500/75 transition-opacity"}),e.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:e.jsx("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-xs",children:e.jsx("div",{className:"bg-white py-7",children:e.jsxs("div",{className:"mt-3 text-center flex items-center justify-center gap-5 sm:mt-0 sm:text-left",children:[e.jsx("h3",{className:"text-base font-medium ",id:"dialog-title",children:"Loading"}),e.jsx("div",{className:"animate-spin rounded-full h-7 w-7 border-t-transparent border-2 border-gray-900"})]})})})})]})}const h=t.createContext(),D=async(i,n)=>await L.post(`${T}/api/exam/solution`,{userId:i,testId:n},{withCredentials:!0}).then(r=>r.data.data).catch(r=>{var s,a;return((a=(s=r.response)==null?void 0:s.data)==null?void 0:a.message)||"Error fetching solution"}),R=({children:i,testId:n,userId:r})=>{const[s,a]=t.useState(null),[c,A]=t.useState(null),[l,g]=t.useState(!0),[p,d]=t.useState(),[j,v]=t.useState(!1),[u,m]=t.useState(-1),[S,x]=t.useState(!1);if(t.useEffect(()=>{(async()=>{const o=await D(r,n);a(o),g(!1),d(o.hasAgreed),m(o.currSection),x(o.isSubmitted)})()},[]),l)return e.jsxs("div",{className:"flex items-center justify-center bg-white h-screen w-screen",children:[" ",e.jsx(C,{})]});if(c)return console.error("Test query error:",c),e.jsx("p",{children:"Error loading test data. Please try again."});const f=s.testSnapshot,w=f[u],y=s.response,b=s.userDetails||[],N=s.columns||[],E={};return e.jsx(h.Provider,{value:{loader:j,hasAgreed:p,setLoader:v,setHasAgreed:d,setData:a,isSubmitted:S,setIsSubmitted:x,testId:n,setCurrent:m,data:s,error:c,loading:l,test:f,section:w,response:y,current:u,helpers:E,userDetails:b,columns:N,submissionId:s._id},children:i})},_=()=>t.useContext(h);export{C as L,R as T,_ as u};
