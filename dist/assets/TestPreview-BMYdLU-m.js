import{e as v,j as e,r as b,i as S,I as w,am as A,d as C,B as I}from"./index-C9f0ej2j.js";const E=v(e.jsx("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos"),F=()=>{const[d,r]=b.useState(null),[c,t]=b.useState(null),[x,l]=b.useState(!0),[s,i]=b.useState(0),{id:g}=S();if(b.useEffect(()=>{(async()=>{var f;try{const y=await C.get(`${I}/api/test/response/${g}`,{withCredentials:!0});if((f=y.data)!=null&&f.status){const p=y.data.data;r(p),t(computeAnalysis(p.response,p.testSnapshot))}}catch(y){console.error("Error fetching preview:",y.message)}finally{l(!1)}})()},[g]),x)return e.jsx("p",{className:"text-center py-6",children:"Loading..."});if(!d)return e.jsx("p",{className:"text-center text-red-500 py-6",children:"No data found"});const{response:a,testSnapshot:o}=d;if(!a||a.length===0)return e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Test Preview"}),e.jsx("p",{className:"mt-4 text-red-500",children:"No responses available for this test."})]});const m=()=>{s<o.length-1&&i(s+1)},j=()=>{s>0&&i(s-1)},n=o[s],N=a.find(u=>u.sectionId===(n==null?void 0:n.sectionId));return e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 text-gray-800",children:"Test Preview"}),e.jsxs("div",{className:"flex items-center justify-between mb-6 bg-white shadow p-4 rounded-xl border",children:[e.jsx(w,{onClick:j,disabled:s===0,children:e.jsx(A,{})}),e.jsxs("h1",{className:"text-xl font-semibold text-gray-700",children:["Section ",s+1,": ",n==null?void 0:n.title]}),e.jsx(w,{onClick:m,disabled:s===o.length-1,children:e.jsx(E,{})})]}),e.jsxs("div",{className:"bg-white shadow-md rounded-xl border p-6",children:[n.type==="quiz"&&e.jsx(_,{section:n,sectionResponse:N}),n.type==="coding"&&e.jsx($,{section:n,sectionResponse:N})]}),e.jsxs("div",{className:"flex justify-between mt-6",children:[e.jsx("button",{onClick:j,disabled:s===0,className:"px-4 py-2 rounded-md bg-gray-200 disabled:opacity-50",children:"Previous"}),e.jsx("button",{onClick:m,disabled:s===o.length-1,className:"px-4 py-2 rounded-md bg-blue-600 text-white disabled:opacity-50",children:"Next"})]})]})},_=({section:d,sectionResponse:r})=>{var c;return e.jsx("div",{className:"space-y-6",children:(c=d==null?void 0:d.questions)==null?void 0:c.map((t,x)=>{var s,i,g;const l=(i=(s=r==null?void 0:r.quizAnswers)==null?void 0:s[0])==null?void 0:i[t==null?void 0:t._id];return console.log(l),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-200",children:[e.jsx("pre",{className:"text-lg font-medium text-gray-900 mb-3",children:`Q${x+1}. ${t.question}`}),e.jsx("div",{children:t.answer&&e.jsxs(e.Fragment,{children:[e.jsx("label",{className:"text-xs",htmlFor:"",children:"Correct Answer"}),e.jsx("pre",{className:"bg-gray-50 px-4 py-3 rounded-lg border-2 border-gray-100",children:t.answer}),e.jsx("label",{className:"text-xs",htmlFor:"",children:"Your Answer"}),e.jsx("pre",{className:`bg-gray-50 px-4 py-3 rounded-lg border-[1px] ${l!==(t==null?void 0:t.answer)?"border-red-500":"border-green-100"}`,children:l??"Not Attempted"})]})}),e.jsx("div",{className:"flex flex-col gap-3",children:(g=t==null?void 0:t.options)==null?void 0:g.map((a,o)=>{const m=a==null?void 0:a.isCorrect,j=(t==null?void 0:t.category)=="MSQ"?l==null?void 0:l.includes(a==null?void 0:a.text):l===(a==null?void 0:a.text);return e.jsxs("div",{className:`
                      px-4 py-3 rounded-md border 
                      flex justify-between items-center
                      ${m?"bg-green-100 border-green-400":"bg-white"}
                      ${j&&!m?"bg-red-100 border-red-400":""}
                    `,children:[e.jsx("span",{className:"text-gray-900",children:a==null?void 0:a.text}),e.jsxs("div",{className:"flex gap-3 text-sm",children:[m&&e.jsx("span",{className:"text-green-700 font-semibold",children:"âœ“ Correct"}),j&&e.jsx("span",{className:"text-blue-700 font-semibold",children:"Your Answer"})]})]},o)})})]},t==null?void 0:t._id)})})},$=({section:d,sectionResponse:r})=>{var c;return e.jsx("div",{className:"space-y-10",children:(c=d==null?void 0:d.problems)==null?void 0:c.map(t=>{var x,l;return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:t.title}),e.jsx(h,{title:"Description",children:e.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:t.description})}),((x=t.constraints)==null?void 0:x.length)>0&&e.jsx(h,{title:"Constraints",children:e.jsx("ul",{className:"list-disc pl-6 text-gray-700",children:t.constraints.map((s,i)=>e.jsx("li",{children:s},i))})}),((l=t.examples)==null?void 0:l.length)>0&&e.jsx(h,{title:"Examples",children:t.examples.map((s,i)=>e.jsxs("div",{className:"bg-gray-100 p-4 rounded-md border mb-4",children:[e.jsx("p",{className:"font-medium text-gray-800",children:"Input:"}),e.jsx("pre",{className:"text-gray-700",children:s.input}),e.jsx("p",{className:"font-medium text-gray-800 mt-2",children:"Output:"}),e.jsx("pre",{className:"text-gray-700",children:s.output}),s.explanation&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-medium text-gray-800 mt-2",children:"Explanation:"}),e.jsx("pre",{className:"text-gray-700",children:s.explanation})]})]},i))}),e.jsx(h,{title:"Your Submitted Code",children:e.jsx("pre",{className:"bg-black text-green-400 p-4 rounded-lg overflow-auto text-sm",children:r==null?void 0:r.codingAnswers[0][t._id].code})}),e.jsx(h,{title:"Testcases",children:e.jsx("pre",{className:"bg-gray-900 text-gray-200 p-4 rounded-lg overflow-auto text-sm",children:r==null?void 0:r.codingAnswers[0][t._id].total})}),e.jsx(h,{title:"Passed",children:e.jsx("pre",{className:"bg-gray-800 text-white p-4 rounded-lg text-sm",children:String(r==null?void 0:r.codingAnswers[0][t._id].passed)})})]},t._id)})})},h=({title:d,children:r})=>e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow border border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-3",children:d}),r]});export{F as default};
