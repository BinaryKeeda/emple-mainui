import{r as a,u as E,R as O,j as e,L as P,H as k,B as p,G as L,P as R,a as T,b as f,M as C,l as B}from"./index-DuMHTSdw.js";import"./Header-BjJj_FpH.js";import"./index-BU605ET1.js";import"./Menu-DkPAI_lM.js";import"./ExpandMore-b6I_c1LY.js";function G(){const[i,h]=a.useState(""),[l,g]=a.useState(["","","","","",""]),[n,y]=a.useState(!1),[d,o]=a.useState(""),[m,x]=a.useState(""),[j,c]=a.useState(!1),b=E(),u=a.useRef([...Array(6)].map(()=>O.createRef())),v=async s=>{s.preventDefault(),c(!0);try{(await f.post(`${C}/api/v4/mail/signup/requested`,{email:i})).status===200&&(o("OTP sent to your email","success"),y(!0))}catch(t){console.error(t),x(t==null?void 0:t.response.data.message,"error")}finally{c(!1)}},N=async s=>{s.preventDefault(),c(!0);const t=l.join("");if(t.length!==6){o("Enter full 6-digit OTP","warning");return}try{const r=await f.post(`${p}/auth/verify/otp`,{email:i,otp:t},{withCredentials:!0});r.status===200&&(o("Login successful!","success"),b(B(r.data.user)))}catch(r){console.error(r),x("OTP verification failed","error")}finally{c(!1)}},w=(s,t)=>{if(!/^\d?$/.test(t))return;const r=[...l];r[s]=t,g(r),t&&s<5&&u.current[s+1].current.focus()},S=(s,t)=>{t.key==="Backspace"&&!l[s]&&s>0&&u.current[s-1].current.focus()};return e.jsxs(e.Fragment,{children:[j&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/30 backdrop-blur-sm flex items-center justify-center",children:e.jsx("div",{className:"relative rounded-2xl h-[100px] w-[330px] shadow-lg flex items-center justify-center space-x-4",children:e.jsx(P,{})})}),e.jsxs(k,{children:[e.jsx("title",{children:"BinaryKeeda | Register"}),e.jsx("meta",{name:"description",content:"Login to BinaryKeeda Campus to access your courses and resources."}),e.jsx("link",{rel:"canonical",href:"https://binarykeeda.com/login"})]}),e.jsx("main",{className:"flex  w-full h-screen justify-center items-center ",children:e.jsx("div",{className:"flex flex-col w-[380px] h-full items-center justify-center",children:e.jsxs("form",{onSubmit:n?N:v,className:"w-full relative bg-white/10 backdrop-blur-md py-14 p-8 h-max rounded-lg ",children:[e.jsx("h1",{className:"text-2xl text-center font-semibold mb-7",children:n?"Enter the OTP sent to your email":"Enter your email"}),e.jsx("div",{className:"flex justify-center items-center ",children:e.jsxs("a",{className:"text-[#f1f1f1] w-full justify-center flex gap-3 bg-black text-sm items-center px-4 py-3 rounded-md",href:`${p}/auth/google`,children:["Continue with Google",e.jsx(L,{sx:{border:"1px solid #ccc",borderRadius:"50%",padding:"5px",fontSize:26},color:"inherit"})]})}),e.jsxs("div",{className:"flex gap-2 items-center text-[#111827] justify-center my-4",children:[e.jsx("hr",{className:"flex-1"}),"or",e.jsx("hr",{className:"flex-1"})]}),e.jsxs("div",{className:"relative mb-1",children:[e.jsx("input",{required:!0,onChange:s=>h(s.target.value),value:i,type:"email",disabled:n,className:"w-full pl-3 pr-10 py-2 bg-transparent placeholder:text-gray-600 text-gray-700 text-sm border border-gray-300 rounded-md focus:outline-none focus:border-gray-200 shadow-sm",placeholder:"Enter Your Email"}),e.jsx(R,{className:"absolute top-1/2 right-3 -translate-y-1/2 text-[#111827]"})]}),d&&e.jsx("p",{className:"mb-5 pt-2 ml-1 text-green-500 text-xs",children:d}),m&&e.jsx("p",{className:"mb-5 pt-2 ml-1 text-red-500 text-xs",children:m}),n&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"mb-3",children:"Enter OTP"}),e.jsx("div",{className:"flex mb-5 gap-3 justify-evenly",children:l.map((s,t)=>e.jsx("input",{ref:u.current[t],required:!0,maxLength:1,type:"text",inputMode:"numeric",className:"w-[50px] h-[50px] text-center text-xl bg-transparent text-gray-600 border border-gray-300 rounded-md focus:outline-none",value:s,onChange:r=>w(t,r.target.value),onKeyDown:r=>S(t,r)},t))})]}),e.jsx("button",{type:"submit",className:"px-6 py-2 mt-4 bg-orange-500 w-full hover:bg-orange-600 text-white rounded-lg font-semibold",children:n?"Verify OTP":"Send OTP"}),!n&&e.jsxs(e.Fragment,{children:[" ",e.jsxs("div",{className:"text-[#111827] my-3 flex justify-end  text-xs",children:["Already a user ?",e.jsx(T,{to:"/login",className:"ml-1 hover:underline ",children:"Login"})]})]}),e.jsxs("p",{className:"absolute  text-xs w-full left-0 bottom-4 text-center z-10 text-[#111827]  mt-4",children:[" ",e.jsxs("a",{target:"_blank",className:"hover:underline",href:"/terms-of-service",children:[" ","Term & Conditions"," "]})," ","|"," ",e.jsx("a",{target:"blank",className:"hover:underline",href:"/privacy-policy",children:"Privacy Policy"})," "]})]})})})]})}export{G as default};
