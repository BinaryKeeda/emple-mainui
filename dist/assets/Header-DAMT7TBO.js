import{ai as rr,ah as or,r as v,aj as tr,b5 as k,a7 as E,a5 as B,j as t,b2 as l,ak as er,al as Z,b3 as lr,a3 as cr,bA as pr,ad as dr,b8 as gr,e as hr,b as mr,B as ur,R as fr,bB as vr,c as xr,u as br,a as G,o as yr,I as J,ae as Pr,af as Or}from"./index-Dgxf8jnM.js";import{u as jr}from"./useQuery-Coiko6QL.js";import{u as Rr,G as kr}from"./api-DNEq04TM.js";import{u as Cr}from"./index-DdPFbzDz.js";import{m as Dr}from"./mergeSlotProps-B3zE2hsj.js";import{P as Nr}from"./Paper-lVDyPjmC.js";import{D as ar}from"./Divider-Bt6up9Hs.js";import{S as wr,P as Br}from"./ShortText-DCPzPlgT.js";import{u as nr}from"./usePreviousProps-BZynFh5X.js";function Tr(o){const{badgeContent:r,invisible:e=!1,max:n=99,showZero:c=!1}=o,s=nr({badgeContent:r,max:n});let p=e;e===!1&&r===0&&!c&&(p=!0);const{badgeContent:i,max:a=n}=p?s:o,d=i&&Number(i)>a?`${a}+`:i;return{badgeContent:i,invisible:p,max:a,displayValue:d}}function $r(o){return or("MuiBadge",o)}const f=rr("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),q=10,K=4,Sr=o=>{const{color:r,anchorOrigin:e,invisible:n,overlap:c,variant:s,classes:p={}}=o,i={root:["root"],badge:["badge",s,n&&"invisible",`anchorOrigin${l(e.vertical)}${l(e.horizontal)}`,`anchorOrigin${l(e.vertical)}${l(e.horizontal)}${l(c)}`,`overlap${l(c)}`,r!=="default"&&`color${l(r)}`]};return er(i,$r,p)},zr=B("span",{name:"MuiBadge",slot:"Root",overridesResolver:(o,r)=>r.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Ar=B("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(o,r)=>{const{ownerState:e}=o;return[r.badge,r[e.variant],r[`anchorOrigin${l(e.anchorOrigin.vertical)}${l(e.anchorOrigin.horizontal)}${l(e.overlap)}`],e.color!=="default"&&r[`color${l(e.color)}`],e.invisible&&r.invisible]}})(Z(({theme:o})=>({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:o.typography.fontFamily,fontWeight:o.typography.fontWeightMedium,fontSize:o.typography.pxToRem(12),minWidth:q*2,lineHeight:1,padding:"0 6px",height:q*2,borderRadius:q,zIndex:1,transition:o.transitions.create("transform",{easing:o.transitions.easing.easeInOut,duration:o.transitions.duration.enteringScreen}),variants:[...Object.entries(o.palette).filter(lr(["contrastText"])).map(([r])=>({props:{color:r},style:{backgroundColor:(o.vars||o).palette[r].main,color:(o.vars||o).palette[r].contrastText}})),{props:{variant:"dot"},style:{borderRadius:K,height:K*2,minWidth:K*2,padding:0}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="top"&&r.anchorOrigin.horizontal==="right"&&r.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${f.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="bottom"&&r.anchorOrigin.horizontal==="right"&&r.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${f.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="top"&&r.anchorOrigin.horizontal==="left"&&r.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${f.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="bottom"&&r.anchorOrigin.horizontal==="left"&&r.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${f.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="top"&&r.anchorOrigin.horizontal==="right"&&r.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${f.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="bottom"&&r.anchorOrigin.horizontal==="right"&&r.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${f.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="top"&&r.anchorOrigin.horizontal==="left"&&r.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${f.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="bottom"&&r.anchorOrigin.horizontal==="left"&&r.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${f.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:o.transitions.create("transform",{easing:o.transitions.easing.easeInOut,duration:o.transitions.duration.leavingScreen})}}]})));function X(o){return{vertical:(o==null?void 0:o.vertical)??"top",horizontal:(o==null?void 0:o.horizontal)??"right"}}const Ir=v.forwardRef(function(r,e){const n=tr({props:r,name:"MuiBadge"}),{anchorOrigin:c,className:s,classes:p,component:i,components:a={},componentsProps:d={},children:h,overlap:x="rectangular",color:j="default",invisible:b=!1,max:R=99,badgeContent:T,slots:g,slotProps:m,showZero:$=!1,variant:C="standard",...S}=n,{badgeContent:y,invisible:_,max:z,displayValue:D}=Tr({max:R,invisible:b,badgeContent:T,showZero:$}),A=nr({anchorOrigin:X(c),color:j,overlap:x,variant:C,badgeContent:T}),I=_||y==null&&C!=="dot",{color:Q=j,overlap:P=x,anchorOrigin:O,variant:u=C}=I?A:n,H=X(O),L=u!=="dot"?D:void 0,N={...n,badgeContent:y,invisible:I,max:z,displayValue:L,showZero:$,anchorOrigin:H,color:Q,overlap:P,variant:u},F=Sr(N),w={slots:{root:(g==null?void 0:g.root)??a.Root,badge:(g==null?void 0:g.badge)??a.Badge},slotProps:{root:(m==null?void 0:m.root)??d.root,badge:(m==null?void 0:m.badge)??d.badge}},[M,V]=k("root",{elementType:zr,externalForwardedProps:{...w,...S},ownerState:N,className:E(F.root,s),ref:e,additionalProps:{as:i}}),[W,U]=k("badge",{elementType:Ar,externalForwardedProps:w,ownerState:N,className:F.badge});return t.jsxs(M,{...V,children:[h,t.jsx(W,{...U,children:L})]})});function Lr(o){return or("MuiDrawer",o)}rr("MuiDrawer",["root","docked","paper","anchorLeft","anchorRight","anchorTop","anchorBottom","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const sr=(o,r)=>{const{ownerState:e}=o;return[r.root,(e.variant==="permanent"||e.variant==="persistent")&&r.docked,r.modal]},Fr=o=>{const{classes:r,anchor:e,variant:n}=o,c={root:["root",`anchor${l(e)}`],docked:[(n==="permanent"||n==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${l(e)}`,n!=="temporary"&&`paperAnchorDocked${l(e)}`]};return er(c,Lr,r)},Mr=B(dr,{name:"MuiDrawer",slot:"Root",overridesResolver:sr})(Z(({theme:o})=>({zIndex:(o.vars||o).zIndex.drawer}))),Ur=B("div",{shouldForwardProp:gr,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:sr})({flex:"0 0 auto"}),Er=B(Nr,{name:"MuiDrawer",slot:"Paper",overridesResolver:(o,r)=>{const{ownerState:e}=o;return[r.paper,r[`paperAnchor${l(e.anchor)}`],e.variant!=="temporary"&&r[`paperAnchorDocked${l(e.anchor)}`]]}})(Z(({theme:o})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(o.vars||o).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:r})=>r.anchor==="left"&&r.variant!=="temporary",style:{borderRight:`1px solid ${(o.vars||o).palette.divider}`}},{props:({ownerState:r})=>r.anchor==="top"&&r.variant!=="temporary",style:{borderBottom:`1px solid ${(o.vars||o).palette.divider}`}},{props:({ownerState:r})=>r.anchor==="right"&&r.variant!=="temporary",style:{borderLeft:`1px solid ${(o.vars||o).palette.divider}`}},{props:({ownerState:r})=>r.anchor==="bottom"&&r.variant!=="temporary",style:{borderTop:`1px solid ${(o.vars||o).palette.divider}`}}]}))),ir={left:"right",right:"left",top:"down",bottom:"up"};function _r(o){return["left","right"].includes(o)}function Hr({direction:o},r){return o==="rtl"&&_r(r)?ir[r]:r}const Vr=v.forwardRef(function(r,e){const n=tr({props:r,name:"MuiDrawer"}),c=cr(),s=Cr(),p={enter:c.transitions.duration.enteringScreen,exit:c.transitions.duration.leavingScreen},{anchor:i="left",BackdropProps:a,children:d,className:h,elevation:x=16,hideBackdrop:j=!1,ModalProps:{BackdropProps:b,...R}={},onClose:T,open:g=!1,PaperProps:m={},SlideProps:$,TransitionComponent:C,transitionDuration:S=p,variant:y="temporary",slots:_={},slotProps:z={},...D}=n,A=v.useRef(!1);v.useEffect(()=>{A.current=!0},[]);const I=Hr({direction:s?"rtl":"ltr"},i),P={...n,anchor:i,elevation:x,open:g,variant:y,...D},O=Fr(P),u={slots:{transition:C,..._},slotProps:{paper:m,transition:$,...z,backdrop:Dr(z.backdrop||{...a,...b},{transitionDuration:S})}},[H,L]=k("root",{ref:e,elementType:Mr,className:E(O.root,O.modal,h),shouldForwardComponentProp:!0,ownerState:P,externalForwardedProps:{...u,...D,...R},additionalProps:{open:g,onClose:T,hideBackdrop:j,slots:{backdrop:u.slots.backdrop},slotProps:{backdrop:u.slotProps.backdrop}}}),[N,F]=k("paper",{elementType:Er,shouldForwardComponentProp:!0,className:E(O.paper,m.className),ownerState:P,externalForwardedProps:u,additionalProps:{elevation:y==="temporary"?x:0,square:!0}}),[w,M]=k("docked",{elementType:Ur,ref:e,className:E(O.root,O.docked,h),ownerState:P,externalForwardedProps:u,additionalProps:D}),[V,W]=k("transition",{elementType:pr,ownerState:P,externalForwardedProps:u,additionalProps:{in:g,direction:ir[I],timeout:S,appear:A.current}}),U=t.jsx(N,{...F,children:d});if(y==="permanent")return t.jsx(w,{...M,children:U});const Y=t.jsx(V,{...W,children:U});return y==="persistent"?t.jsx(w,{...M,children:Y}):t.jsx(H,{...L,children:Y})}),Wr=hr(t.jsx("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2m6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1z"}),"Notifications"),Gr="#1d1e20",qr=async o=>(await Rr.get(kr.GET_USER_INVITE+o)).data,Kr=({userId:o})=>jr({queryKey:["inviteData",o],queryFn:()=>qr(o)});function Zr({notificationOpen:o,setNotificationOpen:r,pendingInvites:e,userId:n,refreshInvites:c}){var i;const{data:s}=Kr({userId:n}),p=async(a,d)=>{try{await mr.post(ur+"/api/data/invites/respond",{inviteId:a,accept:d==="accept"},{withCredentials:!0}),c&&c(),window.location.reload()}catch(h){console.error("Error responding to invite:",h)}};return t.jsx(Vr,{anchor:"right",open:o,onClose:()=>r(!1),children:t.jsxs("div",{className:"w-80 p-4",children:[t.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Notifications"}),t.jsx(ar,{className:"mb-2"}),t.jsx("ul",{className:"space-y-4 mt-3",children:(i=s==null?void 0:s.data)!=null&&i.length?s.data.map(a=>{var d;return t.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-xl shadow-sm border",children:[t.jsxs("div",{className:"text-sm",children:[t.jsxs("p",{className:"font-medium",children:[(d=a.invitedBy)==null?void 0:d.name," invited you to join a group"]}),t.jsxs("p",{className:"text-xs text-gray-500",children:["Role: ",a.role," ·"," ",new Date(a.createdAt).toLocaleString()]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>p(a._id,"accept"),className:"px-2 py-1 text-xs rounded-lg bg-green-500 text-white hover:bg-green-600",children:"✅"}),t.jsx("button",{onClick:()=>p(a._id,"reject"),className:"px-2 py-1 text-xs rounded-lg bg-red-500 text-white hover:bg-red-600",children:"❌"})]})]},a._id)}):t.jsx("li",{className:"text-sm text-gray-500",children:"No pending invites"})})]})})}const no=fr.memo(({user:o,menuOpen:r,setMenuOpen:e})=>{const{toggleTheme:n,theme:c}=v.useContext(vr),s=xr(b=>{var R;return((R=b.auth.user)==null?void 0:R.pendingInvites)||[]}),p=br(),[i,a]=v.useState(!1),[d,h]=v.useState(0);v.useEffect(()=>{h(s.length)},[s]);const x=()=>{try{p(Pr(Or.get("token")))}catch(b){console.log(b,"logout")}},j=()=>{a(!0),h(0)};return t.jsxs(t.Fragment,{children:[t.jsx("header",{className:"relative h-[59px]",children:t.jsxs("nav",{className:`fixed shadow-sm bg-white dark:bg-support dark:text-gray-50 bg-blend-difference text-gray-600 h-[59px] items-center pr-5 pl-2 flex justify-between z-40 w-full top-0 dark:bg-[${Gr}]`,children:[t.jsx("div",{className:"lg:hidden",children:t.jsx(wr,{onClick:()=>e(!r)})}),t.jsx("div",{className:"flex md:ml-[100px] gap-1 items-center",children:t.jsx(G,{to:"/",children:t.jsx("img",{src:yr,className:"h-10",alt:"Logo"})})}),t.jsx("div",{className:"flex items-center gap-3",children:o?t.jsxs(t.Fragment,{children:[t.jsx(J,{"aria-label":"notifications",onClick:j,children:t.jsx(Ir,{badgeContent:d,color:"error",overlap:"circular",children:t.jsx(Wr,{})})}),t.jsx(J,{onClick:x,children:t.jsx(Br,{})})]}):t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx(G,{to:"/login",className:"text-sm font-medium hover:underline",children:"Login"}),t.jsx(ar,{orientation:"vertical",flexItem:!0,sx:{bgcolor:"grey.500"}}),t.jsx(G,{to:"/register",className:"text-sm font-medium hover:underline",children:"Signup"})]})})]})}),t.jsx(Zr,{userId:o==null?void 0:o._id,notificationOpen:i,setNotificationOpen:a,pendingInvites:s})]})});export{no as H};
