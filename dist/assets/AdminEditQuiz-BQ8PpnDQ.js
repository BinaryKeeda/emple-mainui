const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AddQuestionAiken-BytDe07_.js","assets/index-BM5g2PjF.js","assets/index-QIgYHzyf.css","assets/index-ByLKE6eU.js","assets/Button-BIFffkK2.js","assets/AddQuestionJson-DqvTOFZf.js","assets/AddQuestionExcel-Bic-mucM.js","assets/xlsx-CygJKsBP.js"])))=>i.map(i=>d[i]);
import{a as M,r as t,i as q,c as _,j as e,D as O,I as R,d as k,B as C,ak as A}from"./index-BM5g2PjF.js";import{c as T,C as U,U as w,A as F,a as W}from"./AddQuestion-BmiazN7j.js";import{B as v}from"./Button-BIFffkK2.js";import{A as $,a as J,b as P}from"./AccordionSummary-CHOg6WoC.js";import{D as B}from"./Delete-SIs0lT4G.js";import{T as f}from"./TextField-Cyg_nLUZ.js";import{b as z,S as E}from"./Select-DlAZYWQE.js";import{M as m}from"./MenuItem-BLp2167C.js";import{C as H}from"./Checkbox-Do5jr3MC.js";import"./Grow-oNTD_17Z.js";import"./Paper-DT7YcBnh.js";import"./Menu-DSFvii0W.js";import"./index-BCJJj27n.js";import"./useSlotProps-aKe4moxB.js";import"./mergeSlotProps-CQVUmErN.js";import"./index-DIavHz_S.js";import"./extendSxProp-73SfDKFT.js";import"./dividerClasses-DxGILFvv.js";import"./SwitchBase-BG946val.js";const L=t.lazy(()=>A(()=>import("./AddQuestionAiken-BytDe07_.js"),__vite__mapDeps([0,1,2,3,4]))),K=t.lazy(()=>A(()=>import("./AddQuestionJson-DqvTOFZf.js"),__vite__mapDeps([5,1,2,3,4]))),V=t.lazy(()=>A(()=>import("./AddQuestionExcel-Bic-mucM.js"),__vite__mapDeps([6,1,2,3,7,4])));function je(){const{data:c}=M(s=>s.quiz),[g,x]=t.useState(!0),[j,l]=t.useState(!1),[y,o]=t.useState(!1),[a,d]=t.useState(null),{id:r}=q(),[h,p]=t.useState(0),[b,Q]=t.useState(0),[D,u]=t.useState(!1),{enqueueSnackbar:n}=_();t.useEffect(()=>{(async()=>{try{const i=await k.get(`${C}/api/admin/quiz/${r}`,{withCredentials:!0});i.data&&d(i.data)}catch(i){console.error(i),n("Failed to load quiz",{variant:"error"})}})()},[r,D]),t.useEffect(()=>{a&&(Q(a==null?void 0:a.marks),p(T(a.questions||[])))},[a]);const I=async s=>{try{await k.delete(`${C}/api/admin/quiz/question/del/${a._id}/${s}`),n("Question deleted successfully!",{variant:"success"}),u(i=>!i)}catch(i){console.error(i),n("Failed to delete question",{variant:"error"})}};return a?e.jsxs("section",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center bg-white rounded-md shadow-sm p-6 gap-4",children:[e.jsxs("div",{className:"flex flex-col text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:[e.jsx("strong",{children:"Status:"})," ",a.isAvailable?"Available":"Not Available"]}),e.jsxs("span",{className:"text-gray-600",children:[e.jsx("strong",{children:"Current Marks:"})," ",h," / ",b]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(v,{onClick:()=>x(!1),variant:"outlined",startIcon:e.jsx(U,{}),children:"Upload Excel"}),e.jsx(v,{onClick:()=>l(!0),variant:"contained",startIcon:e.jsx(w,{}),children:"Upload JSON"}),e.jsx(v,{onClick:()=>o(!0),variant:"contained",startIcon:e.jsx(w,{}),children:"Upload AIKEN"})]})]}),e.jsx(G,{data:a,onRefresh:()=>u(s=>!s)}),e.jsx(F,{quizId:r,maxMarks:b,currentMarks:h,setCurrentMarks:p,onRefresh:()=>u(s=>!s)}),e.jsxs("section",{className:"bg-white p-6 rounded-md shadow-sm",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Questions"}),a.questions.length>0?a.questions.map((s,i)=>e.jsxs($,{className:"mb-3 rounded-md border",children:[e.jsx(J,{expandIcon:e.jsx(W,{}),sx:{flexDirection:"row-reverse",alignItems:"center"},children:e.jsxs("div",{className:"flex w-full justify-between items-center",children:[e.jsxs("h3",{className:"text-sm font-medium",children:["Question ",i+1,":"," ",e.jsx("span",{className:"ml-2 font-normal",children:s.question})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(R,{onClick:()=>I(s._id),size:"small",children:e.jsx(B,{sx:{color:"gray"}})}),e.jsxs("span",{className:"text-xs text-gray-600",children:[s.marks," Marks"]})]})]})}),e.jsx(P,{children:e.jsxs("div",{className:"px-4 text-sm flex flex-col gap-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Type:"})," ",s.category]}),s.image&&e.jsx("img",{src:s.image,alt:"Question",className:"my-2 h-24 w-auto object-contain rounded-md border"}),s.category==="Text"&&e.jsx(f,{label:"Answer",value:s.answer,variant:"standard",disabled:!0,fullWidth:!0}),(s.category==="MCQ"||s.category==="MSQ")&&s.options.map((N,S)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{children:["Option ",S+1,": ",N.text]}),e.jsx("input",{type:"radio",checked:N.isCorrect,readOnly:!0}),e.jsx("span",{className:"text-xs text-green-600",children:N.isCorrect?"Correct":""})]},S))]})})]},i)):e.jsx("p",{className:"text-sm text-gray-500 italic",children:"No Questions to display"})]}),!g&&e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"loader"}),children:e.jsx(V,{id:r,setModalClose:x,onSuccess:()=>{n("Excel uploaded successfully!",{variant:"success"}),u(s=>!s)},onError:()=>n("Upload failed",{variant:"error"})})}),j&&e.jsx(K,{id:r,setModalClose:()=>l(!1),onSuccess:()=>{n("JSON uploaded successfully!",{variant:"success"}),u(s=>!s)},onError:()=>n("JSON upload failed",{variant:"error"})}),y&&e.jsx(L,{id:r,setModalClose:()=>o(!1),onSuccess:()=>{n("AIKEN uploaded successfully!",{variant:"success"}),u(s=>!s)},onError:()=>n("AIKEN upload failed",{variant:"error"})})]}):e.jsx("div",{className:"h-screen w-screen fixed flex justify-center items-center z-[2999]",children:e.jsx(O,{size:"27px"})})}const G=({data:c,onRefresh:g})=>{const{user:x}=M(d=>d.auth),{enqueueSnackbar:j}=_(),[l,y]=t.useState({title:c.title,creator:x._id,duration:c.duration,marks:c.marks,category:c.category,difficulty:c.difficulty,isAvailable:c.isAvailable}),o=d=>{const{name:r,value:h,type:p,checked:b}=d.target;y({...l,[r]:p==="checkbox"?b:["marks","duration"].includes(r)?parseInt(h):h})},a=async d=>{d.preventDefault();try{await k.post(`${C}/api/admin/quiz/edit/${c._id}`,l,{withCredentials:!0}),j("Quiz updated successfully!",{variant:"success"}),g()}catch(r){j("Failed to update quiz",{variant:"error"}),console.error(r)}};return e.jsxs("section",{className:"p-6 bg-white rounded-md shadow-sm",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Edit Quiz Details"}),e.jsxs("form",{onSubmit:a,className:"grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Creator"}),e.jsx(f,{size:"small",type:"text",fullWidth:!0,value:x._id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Title"}),e.jsx(f,{size:"small",type:"text",fullWidth:!0,value:l.title,onChange:o})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Marks"}),e.jsx(f,{size:"small",type:"number",name:"marks",value:l.marks,onChange:o,fullWidth:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Duration (min)"}),e.jsx(f,{size:"small",type:"number",name:"duration",value:l.duration,onChange:o,fullWidth:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Category"}),e.jsx(z,{fullWidth:!0,children:e.jsxs(E,{size:"small",name:"category",value:l.category,onChange:o,children:[e.jsx(m,{value:"Aptitude",children:"Aptitude"}),e.jsx(m,{value:"Core",children:"Core"}),e.jsx(m,{value:"Miscellaneous",children:"Miscellaneous"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Difficulty"}),e.jsx(z,{fullWidth:!0,children:e.jsxs(E,{size:"small",name:"difficulty",value:l.difficulty,onChange:o,children:[e.jsx(m,{value:"Easy",children:"Easy"}),e.jsx(m,{value:"Medium",children:"Medium"}),e.jsx(m,{value:"Hard",children:"Hard"})]})})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("label",{className:"text-sm font-semibold",children:"Available"}),e.jsx(H,{checked:l.isAvailable,onChange:o,name:"isAvailable"})]}),e.jsx("div",{className:"col-span-full",children:e.jsx(v,{type:"submit",variant:"contained",color:"primary",children:"Update Quiz"})})]})]})};export{G as QuizEdit,je as default};
