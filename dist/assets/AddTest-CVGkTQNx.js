import{c as y,r as d,q as C,a as S,j as e,_ as D,d as w,B as P}from"./index-5IQCZWui.js";import{D as T,a as W}from"./DialogContent-B2uNAl_5.js";import{D as N,a as q}from"./DialogTitle-IRwE1BRY.js";import{T as s}from"./TextField-BS5c8OM6.js";import{M as n}from"./MenuItem-B-7aeyCt.js";import{B as h}from"./Button-BtkhN6tk.js";import"./Paper-Cl3TElX4.js";import"./Typography-BjSHW2wE.js";import"./index-DCfX2AyQ.js";import"./extendSxProp-N3quz4pF.js";import"./Select-DfQ_w7p6.js";import"./Menu-COdTP9bR.js";import"./index-1AjZU1gY.js";import"./Grow-DcTh7rud.js";import"./mergeSlotProps-Bdsshikm.js";import"./dividerClasses-BuhX_QyX.js";const E={name:"",description:"",duration:"",visibility:"private",category:"Placements"};function O({setModalClose:o,onTestCreated:x=()=>{}}){const{enqueueSnackbar:u}=y(),[t,f]=d.useState(E),[c,m]=d.useState(!1),[p,k]=d.useState(null),g=C(),i=r=>{const{name:l,value:a}=r.target;f(b=>({...b,[l]:a}))},{user:v}=S(r=>r.auth),j=async()=>{var r,l;if(!t.name||!t.duration||!t.visibility||!t.category){u("Please fill all required fields âš ï¸",{variant:"warning"});return}try{m(!0);const a=await w.post(`${P}/api/admin/tests/add`,{...t,duration:Number(t.duration),creator:v._id},{withCredentials:!0});x(a.data.data),o(!1),g("/admin/edit/test/"+a.data.data),u("Test created successfully ðŸŽ‰",{variant:"success"})}catch(a){console.error("Error creating test:",a),u(((l=(r=a.response)==null?void 0:r.data)==null?void 0:l.error)||"Something went wrong âŒ",{variant:"error"})}finally{m(!1)}};return e.jsxs(T,{open:!0,onClose:()=>o(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(N,{children:"Create New Test"}),e.jsxs(W,{dividers:!0,className:"flex flex-col gap-4 pt-4",children:[e.jsx(s,{label:"Test Name",name:"name",value:t.name,onChange:i,fullWidth:!0,required:!0}),e.jsx(s,{label:"Description",name:"description",value:t.description,onChange:i,multiline:!0,rows:3,fullWidth:!0}),e.jsx(s,{label:"Duration (in minutes)",name:"duration",type:"number",value:t.duration,onChange:i,fullWidth:!0,required:!0}),e.jsxs(s,{label:"Visibility",name:"visibility",value:t.visibility,onChange:i,select:!0,fullWidth:!0,children:[e.jsx(n,{value:"private",children:"Private"}),e.jsx(n,{value:"public",children:"Public"}),e.jsx(n,{value:"group",children:"Group"})]}),e.jsxs(s,{label:"Category",name:"category",value:t.category,onChange:i,select:!0,fullWidth:!0,children:[e.jsx(n,{value:"Placements",children:"Placements"}),e.jsx(n,{value:"Gate",children:"Gate"})]}),p&&e.jsx("p",{className:"text-red-600 text-sm",children:p})]}),e.jsxs(q,{children:[e.jsx(h,{onClick:()=>o(!1),disabled:c,children:"Cancel"}),e.jsx(h,{onClick:j,variant:"contained",disabled:c,children:c?e.jsx(D,{size:20}):"Create"})]})]})}export{O as default};
