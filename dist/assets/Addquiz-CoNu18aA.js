import{a as M,q as w,c as A,r as h,bv as Q,j as e,d as E,B as I}from"./index-BCJdd4xs.js";import{D as N}from"./Dialog-DKYg1_ne.js";import{D as B}from"./DialogContent-B41weffU.js";import{T as c}from"./TextField-CMAz3-Fg.js";import{b as v,a as j,S as g}from"./Select-B6-lBGiG.js";import{M as r}from"./MenuItem-kGgLZh-B.js";import{B as y}from"./Button-CLlfYHVl.js";import{A as F}from"./Add-5UHKH4Pg.js";import"./Paper-B813JMof.js";import"./Menu-DLXdeDF7.js";import"./index-B4uUuwMK.js";import"./useSlotProps-ZWgycwXc.js";import"./Grow-DIh1C4O6.js";import"./mergeSlotProps-CdG4bhDu.js";import"./index-V8jcNaCq.js";import"./extendSxProp-Dzti5pGB.js";import"./dividerClasses-CEQA-H9Q.js";function ae({setModalClose:u}){const b=M(i=>i.auth.user),C=w(),{enqueueSnackbar:n}=A(),[q,o]=h.useState(!1),[a,z]=h.useState({title:"",creator:b._id,duration:"",questions:[],marks:"",category:"",difficulty:""}),D=Q(),t=i=>{const{name:s,value:l}=i.target;z({...a,[s]:s==="marks"||s==="duration"?parseInt(l)||0:l})},k=async i=>{var p,x;i.preventDefault(),o(!0);const{title:s,marks:l,duration:f,category:S,difficulty:H}=a;if(!s||!l||!f||!S){n("Please fill in all required fields.",{variant:"warning"}),o(!1);return}if(l<=0||f<=0){n("Marks and duration must be greater than 0.",{variant:"error"}),o(!1);return}try{const m=(await E.post(`${I}/api/admin/quiz/add/`,a,{withCredentials:!0})).data.quiz._id;n("Quiz added successfully ðŸŽ‰",{variant:"success"}),await D.invalidateQueries(["admin-quiz"]),u(!1),C("/admin/edit/quiz/"+m)}catch(d){console.error(d);const m=((x=(p=d.response)==null?void 0:p.data)==null?void 0:x.message)||"Failed to add quiz. Please try again.";n(m,{variant:"error"}),o(!1)}};return e.jsx(N,{open:!0,onClose:()=>u(!1),maxWidth:"sm",fullWidth:!0,children:e.jsx(B,{dividers:!0,className:"relative bg-white rounded-md p-5 shadow-md max-h-[90vh] overflow-y-auto",children:e.jsxs("form",{onSubmit:k,className:"px-2 sm:px-5 pb-10 pt-8",children:[e.jsxs("div",{className:"mb-5 flex flex-col gap-3",children:[e.jsx(c,{size:"small",required:!0,autoComplete:"off",name:"title",value:a.title,onChange:t,label:"Quiz Title"}),e.jsx(c,{size:"small",required:!0,autoComplete:"off",type:"number",name:"marks",value:a.marks,onChange:t,label:"Quiz Marks"}),e.jsx(c,{size:"small",required:!0,autoComplete:"off",type:"number",name:"duration",value:a.duration,onChange:t,label:"Quiz Duration (minutes)"}),e.jsxs(v,{size:"small",required:!0,children:[e.jsx(j,{children:"Category"}),e.jsxs(g,{name:"category",value:a.category,onChange:t,label:"Category",children:[e.jsx(r,{value:"Aptitude",children:"Aptitude"}),e.jsx(r,{value:"Core",children:"Core"}),e.jsx(r,{value:"Miscellaneous",children:"Miscellaneous"}),e.jsx(r,{value:"Gate",children:"Gate"}),e.jsx(r,{value:"Map",children:"Map"})]})]}),e.jsxs(v,{size:"small",required:!0,children:[e.jsx(j,{children:"Difficulty"}),e.jsxs(g,{name:"difficulty",value:a.difficulty,onChange:t,label:"Difficulty",children:[e.jsx(r,{value:"Easy",children:"Easy"}),e.jsx(r,{value:"Medium",children:"Medium"}),e.jsx(r,{value:"Hard",children:"Hard"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(y,{type:"submit",disabled:q,variant:"contained",color:"primary",endIcon:e.jsx(F,{}),sx:{color:"#f1f1f1",fontWeight:"bold"},children:"Add Quiz"}),e.jsx(y,{variant:"outlined",onClick:()=>u(!1),children:"Cancel"})]})]})})})}export{ae as default};
